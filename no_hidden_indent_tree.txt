### ğŸ“‚ ç›®å½•ç»“æ„ä¸æ–‡ä»¶å†…å®¹æŠ¥å‘Š (æ’é™¤éšè—æ–‡ä»¶/ç›®å½•) ###
---
å¼€å§‹æ‰«æç›®å½•: .
---
.
README.md
    # å–é¤ç è¯†åˆ« (HyperNotification)
    
    ä¸€ä¸ªç”¨äºè¯†åˆ«å–é¤ç çš„Androidåº”ç”¨ï¼Œæ”¯æŒæˆªå›¾è¯†åˆ«å’Œç„¦ç‚¹é€šçŸ¥(å²›é€šçŸ¥)åŠŸèƒ½ã€‚
    
    ## åŠŸèƒ½ç‰¹æ€§
    
    - ğŸ“¸ å±å¹•æˆªå›¾
    - ğŸ–¼ï¸ å›¾ç‰‡ä¸Šä¼ åˆ°PicGoå›¾åºŠ
    - ğŸ¤– AIè¯†åˆ«å–é¤ç å’Œå•†å®¶åç§°ï¼ˆä½¿ç”¨æ™ºè°±AIï¼‰
    - ğŸ”” å‘é€ç„¦ç‚¹é€šçŸ¥ï¼ˆMIUIå²›é€šçŸ¥ï¼‰
    - ğŸ“ å®æ—¶æ—¥å¿—æŸ¥çœ‹
    - âš¡ å¿«é€Ÿè¿è¡Œæ¨¡å¼
    
    ## é¡¹ç›®ç»“æ„
    
    ```
    HyperNotification/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ src/main/
    â”‚   â”‚   â”œâ”€â”€ java/com/test/hypernotification/
    â”‚   â”‚   â”‚   â”œâ”€â”€ MainActivity.java          # ä¸»ç•Œé¢
    â”‚   â”‚   â”‚   â”œâ”€â”€ PickupCodeService.java     # æ ¸å¿ƒè¯†åˆ«æœåŠ¡
    â”‚   â”‚   â”‚   â”œâ”€â”€ FocusNotificationHelper.java # ç„¦ç‚¹é€šçŸ¥è¾…åŠ©ç±»
    â”‚   â”‚   â”‚   â”œâ”€â”€ ScreenCaptureService.java  # æˆªå›¾æœåŠ¡
    â”‚   â”‚   â”‚   â”œâ”€â”€ QuickRunActivity.java      # å¿«é€Ÿè¿è¡Œæ´»åŠ¨
    â”‚   â”‚   â”‚   â”œâ”€â”€ LogActivity.java           # æ—¥å¿—æŸ¥çœ‹
    â”‚   â”‚   â”‚   â””â”€â”€ LogManager.java            # æ—¥å¿—ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ res/                           # èµ„æºæ–‡ä»¶
    â”‚   â”‚   â””â”€â”€ AndroidManifest.xml            # æ¸…å•æ–‡ä»¶
    â”‚   â”œâ”€â”€ build.gradle                       # æ¨¡å—æ„å»ºé…ç½®
    â”‚   â””â”€â”€ proguard-rules.pro                 # æ··æ·†è§„åˆ™
    â”œâ”€â”€ gradle/wrapper/                        # GradleåŒ…è£…å™¨
    â”œâ”€â”€ .github/workflows/build.yml            # GitHub Actionså·¥ä½œæµ
    â”œâ”€â”€ build.gradle                            # é¡¹ç›®æ„å»ºé…ç½®
    â”œâ”€â”€ settings.gradle                         # é¡¹ç›®è®¾ç½®
    â”œâ”€â”€ gradle.properties                       # Gradleå±æ€§
    â”œâ”€â”€ gradlew                                 # Unix/Linuxæ„å»ºè„šæœ¬
    â””â”€â”€ gradlew.bat                            # Windowsæ„å»ºè„šæœ¬
    ```
    
    ## ç¼–è¯‘å‰å‡†å¤‡
    
    ### é‡è¦ï¼šä¸‹è½½gradle-wrapper.jar
    
    ç”±äºæ–‡ä»¶å¤§å°é™åˆ¶ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨ä¸‹è½½gradle-wrapper.jaræ–‡ä»¶ï¼š
    
    1. ä¸‹è½½åœ°å€ï¼šhttps://github.com/gradle/gradle/raw/master/gradle/wrapper/gradle-wrapper.jar
    2. å°†ä¸‹è½½çš„æ–‡ä»¶æ”¾ç½®åˆ°ï¼š`gradle/wrapper/gradle-wrapper.jar`
    
    æˆ–è€…åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š
    ```bash
    curl -L -o gradle/wrapper/gradle-wrapper.jar https://github.com/gradle/gradle/raw/master/gradle/wrapper/gradle-wrapper.jar
    ```
    
    ## æ„å»ºæ–¹æ³•
    
    ### æ–¹æ³•1ï¼šGitHub Actionsè‡ªåŠ¨æ„å»º
    
    1. Forkæˆ–ä¸Šä¼ æ­¤é¡¹ç›®åˆ°æ‚¨çš„GitHubä»“åº“
    2. ç¡®ä¿å·²æ·»åŠ gradle-wrapper.jaræ–‡ä»¶
    3. Pushåˆ°mainåˆ†æ”¯æˆ–æ‰‹åŠ¨è§¦å‘workflow
    4. åœ¨Actionsé¡µé¢ä¸‹è½½æ„å»ºå¥½çš„APK
    
    ### æ–¹æ³•2ï¼šæœ¬åœ°æ„å»º
    
    ```bash
    # ç»™äºˆæ‰§è¡Œæƒé™
    chmod +x gradlew
    
    # æ„å»ºDebugç‰ˆæœ¬
    ./gradlew assembleDebug
    
    # æ„å»ºReleaseç‰ˆæœ¬
    ./gradlew assembleRelease
    ```
    
    æ„å»ºå®Œæˆåï¼ŒAPKæ–‡ä»¶ä½äºï¼š
    - Debugç‰ˆæœ¬ï¼š`app/build/outputs/apk/debug/app-debug.apk`
    - Releaseç‰ˆæœ¬ï¼š`app/build/outputs/apk/release/app-release-unsigned.apk`
    
    ## ä½¿ç”¨è¯´æ˜
    
    ### é¦–æ¬¡é…ç½®
    
    1. æ‰“å¼€åº”ç”¨ï¼Œå¡«å†™ä»¥ä¸‹é…ç½®ï¼š
       - **AI Token**ï¼šæ™ºè°±AIçš„API Token
       - **PicGo API Key**ï¼šPicGoå›¾åºŠçš„APIå¯†é’¥
       - **PicGo URL**ï¼šå›¾åºŠä¸Šä¼ åœ°å€ï¼ˆé»˜è®¤å·²å¡«å†™ï¼‰
       - **Album ID**ï¼šç›¸å†ŒID
    
    2. é€‰æ‹©æˆªå›¾æ¨¡å¼ï¼š
       - **æ™®é€šæ¨¡å¼**ï¼šä½¿ç”¨Androidç³»ç»Ÿçš„MediaProjection APIï¼ˆé»˜è®¤ï¼‰
       - **Rootæ¨¡å¼**ï¼šä½¿ç”¨screencapå‘½ä»¤ï¼ˆéœ€è¦Rootæƒé™ï¼‰
    
    3. ç‚¹å‡»"ä¿å­˜é…ç½®"
    
    ### è¿è¡Œè¯†åˆ«
    
    1. ç¡®ä¿å±å¹•ä¸Šæ˜¾ç¤ºæœ‰å–é¤ç 
    2. ç‚¹å‡»"è¿è¡Œè¯†åˆ«"æŒ‰é’®
    3. å¦‚æœä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œéœ€è¦æˆäºˆæˆªå±æƒé™
    4. ç­‰å¾…è¯†åˆ«å®Œæˆï¼ŒæŸ¥çœ‹ç»“æœ
    
    ### å¿«é€Ÿè¿è¡Œ
    
    å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¿«é€Ÿå¯åŠ¨è¯†åˆ«ï¼š
    - åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼æŒ‡å‘QuickRunActivity
    - ä½¿ç”¨Intentï¼š`com.test.hypernotification.QUICK_RUN`
    
    ## æƒé™è¯´æ˜
    
    åº”ç”¨éœ€è¦ä»¥ä¸‹æƒé™ï¼š
    - INTERNETï¼šç½‘ç»œè®¿é—®
    - POST_NOTIFICATIONSï¼šå‘é€é€šçŸ¥
    - FOREGROUND_SERVICEï¼šå‰å°æœåŠ¡
    - READ/WRITE_EXTERNAL_STORAGEï¼šæ–‡ä»¶å­˜å‚¨
    
    ## ç„¦ç‚¹é€šçŸ¥è¯´æ˜
    
    åº”ç”¨ä½¿ç”¨åŸç”Ÿé€šçŸ¥ + MIUIæ‰©å±•å‚æ•°çš„æ–¹å¼å‘é€ç„¦ç‚¹é€šçŸ¥ã€‚
    åœ¨æ”¯æŒç„¦ç‚¹é€šçŸ¥çš„è®¾å¤‡ä¸Šï¼Œä¼šæ˜¾ç¤ºä¸ºå²›é€šçŸ¥æ ·å¼ã€‚
    
    ## æŠ€æœ¯æ ˆ
    
    - Android SDK 26+
    - OkHttp3ï¼šç½‘ç»œè¯·æ±‚
    - Gsonï¼šJSONè§£æ
    - Material Designï¼šUIç»„ä»¶
    
    ## æ³¨æ„äº‹é¡¹
    
    1. éœ€è¦Android 8.0ï¼ˆAPI 26ï¼‰åŠä»¥ä¸Šç‰ˆæœ¬
    2. Rootæ¨¡å¼æˆªå›¾åŠŸèƒ½éœ€è¦Rootæƒé™ï¼ˆä½¿ç”¨screencapå‘½ä»¤ï¼‰
    3. æ™®é€šæ¨¡å¼ä½¿ç”¨MediaProjection APIï¼Œéœ€è¦æˆäºˆæˆªå±æƒé™
    4. ç„¦ç‚¹é€šçŸ¥åŠŸèƒ½ä»…åœ¨æ”¯æŒçš„ROMä¸Šç”Ÿæ•ˆï¼ˆå¦‚MIUIã€ColorOSï¼‰
    
    ## å¼€å‘è€…
    
    æ­¤åº”ç”¨åŸºäºæä¾›çš„Shellè„šæœ¬é€»è¾‘å¼€å‘ï¼Œå®Œæ•´å®ç°äº†å–é¤ç è¯†åˆ«çš„å…¨éƒ¨æµç¨‹ã€‚
    
    ## License
    

app
    build.gradle
        plugins {
            id 'com.android.application'
        }
        
        android {
            namespace 'com.test.hypernotification'
            compileSdk 34
        
            defaultConfig {
                applicationId "com.test.hypernotification"
                minSdk 26
                targetSdk 34
                versionCode 1
                versionName "1.0"
            }
        
            buildTypes {
                release {
                    minifyEnabled false
                    proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
                }
            }
        
            compileOptions {
                sourceCompatibility JavaVersion.VERSION_17
                targetCompatibility JavaVersion.VERSION_17
            }
        
            buildFeatures {
                viewBinding true
            }
        }
        
        dependencies {
            implementation 'androidx.appcompat:appcompat:1.6.1'
            implementation 'com.google.android.material:material:1.10.0'
            implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
            implementation 'androidx.viewpager2:viewpager2:1.0.0'
            implementation 'com.squareup.okhttp3:okhttp:4.11.0'
            implementation 'com.google.code.gson:gson:2.10.1'
            implementation 'androidx.preference:preference:1.2.1'

    proguard-rules.pro
        # Add project specific ProGuard rules here.
        # You can control the set of applied configuration files using the
        # proguardFiles setting in build.gradle.
        #
        # For more details, see
        #   http://developer.android.com/guide/developing/tools/proguard.html
        
        # Uncomment this to preserve the line number information for
        # debugging stack traces.
        -keepattributes SourceFile,LineNumberTable
        
        # If you keep the line number information, uncomment this to
        # hide the original source file name.
        -renamesourcefileattribute SourceFile
        
        # OkHttp3
        -dontwarn okhttp3.**
        -dontwarn okio.**
        -dontwarn javax.annotation.**
        -keepnames class okhttp3.internal.publicsuffix.PublicSuffixDatabase
        
        # Gson
        -keepattributes Signature
        -keepattributes *Annotation*
        -dontwarn sun.misc.**
        -keep class com.google.gson.** { *; }
        -keep class * implements com.google.gson.TypeAdapter
        -keep class * implements com.google.gson.TypeAdapterFactory
        -keep class * implements com.google.gson.JsonSerializer
        -keep class * implements com.google.gson.JsonDeserializer
        
        # Keep our model classes

    src
        main
            AndroidManifest.xml
                <?xml version="1.0" encoding="utf-8"?>
                <manifest xmlns:android="http://schemas.android.com/apk/res/android"
                    xmlns:tools="http://schemas.android.com/tools">
                
                    <!-- åŸºç¡€æƒé™ -->
                    <uses-permission android:name="android.permission.INTERNET" />
                    <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
                    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
                    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
                
                    <!-- ç³»ç»Ÿæƒé™ -->
                    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
                    <uses-permission android:name="android.permission.WAKE_LOCK" />
                
                    <!-- å‰å°æœåŠ¡æƒé™ -->
                    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
                    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_MEDIA_PROJECTION" />
                    <uses-permission android:name="android.permission.FOREGROUND_SERVICE_DATA_SYNC" />
                
                    <!-- Root æƒé™ -->
                    <uses-permission android:name="android.permission.ACCESS_SUPERUSER"
                        tools:ignore="ProtectedPermissions" />
                
                    <application
                        android:allowBackup="true"
                        android:icon="@drawable/ic_launcher"
                        android:label="@string/app_name"
                        android:theme="@style/Theme.HyperNotification"
                        android:requestLegacyExternalStorage="true"
                        android:networkSecurityConfig="@xml/network_security_config">
                
                        <!-- ä¸»é¡µé¢ -->
                        <activity
                            android:name=".MainActivityNew"
                            android:exported="true"
                            android:screenOrientation="portrait"
                            android:theme="@style/Theme.HyperNotification.NoActionBar">
                            <intent-filter>
                                <action android:name="android.intent.action.MAIN" />
                                <category android:name="android.intent.category.LAUNCHER" />
                            </intent-filter>
                        </activity>
                
                        <!-- è€ç‰ˆè®¾ç½®é¡µé¢ï¼ˆä»ä¿ç•™ï¼‰ -->
                        <activity
                            android:name=".MainActivity"
                            android:exported="false"
                            android:screenOrientation="portrait" />
                
                        <!-- æ—¥å¿—é¡µé¢ -->
                        <activity
                            android:name=".LogActivity"
                            android:exported="false"
                            android:screenOrientation="portrait" />
                
                        <!-- æ—§ QuickRunActivity å·²åˆ é™¤ï¼ˆä¸èƒ½å†ä½¿ç”¨ï¼Œä¼šå´©æºƒï¼‰ -->
                        <!-- æ”¹ä¸º QuickRunService -->
                        <service
                            android:name=".QuickRunService"
                            android:exported="true">
                            <intent-filter>
                                <action android:name="com.test.hypernotification.QUICK_RUN" />
                            </intent-filter>
                        </service>
                
                        <!-- æˆªå±æœåŠ¡ -->
                        <service
                            android:name=".ScreenCaptureService"
                            android:exported="false"
                            android:foregroundServiceType="mediaProjection" />
                
                        <!-- AI å‰å°è¯†åˆ«æœåŠ¡ -->
                        <service
                            android:name=".RecognitionService"
                            android:exported="false"
                            android:foregroundServiceType="mediaProjection"
                            android:stopWithTask="false" />
                
                        <!-- å¿«æ·ç£è´´æœåŠ¡ -->
                        <service
                            android:name=".PickupCodeTileService"
                            android:icon="@drawable/ic_launcher"
                            android:label="å–é¤ç è¯†åˆ«"
                            android:exported="false"
                            android:permission="android.permission.BIND_QUICK_SETTINGS_TILE">
                            <intent-filter>
                                <action android:name="android.service.quicksettings.action.QS_TILE" />
                            </intent-filter>
                        </service>
                
                    </application>
                

            java
                com
                    test
                        hypernotification
                            FocusNotificationHelper.java
                                package com.test.hypernotification;
                                
                                import android.app.Notification;
                                import android.app.NotificationChannel;
                                import android.app.NotificationManager;
                                import android.content.Context;
                                import android.os.Build;
                                import android.os.Bundle;
                                import android.util.Log;
                                
                                import com.google.gson.JsonObject;
                                
                                /**
                                 * FocusNotificationHelper
                                 * * ç”¨äºå‘é€ MIUI å³¶/ç„¦ç‚¹é€šçŸ¥ã€‚
                                 */
                                public class FocusNotificationHelper {
                                
                                    private static final String TAG = "FocusNotification";
                                
                                    // é€šçŸ¥æ¸ é“ ID å’Œåç§°
                                    private static final String CHANNEL_ID = "pickup_notification_channel";
                                    private static final String CHANNEL_NAME = "å–é¤ç é€šçŸ¥";
                                
                                    // ã€æ–°å¢ã€‘è¯†åˆ«ä¸­é€šçŸ¥çš„å”¯ä¸€IDï¼Œé¿å…ä¸ç»“æœé€šçŸ¥å†²çª
                                    public static final int NOTIFICATION_ID_RECOGNIZING = 1001; 
                                
                                    /**
                                     * ä½¿ç”¨ pickupCode å’Œ merchantName å‘é€ç„¦ç‚¹é€šçŸ¥ï¼ˆè‡ªåŠ¨ç”Ÿæˆ param_v2ï¼‰
                                     * @param context ä¸Šä¸‹æ–‡
                                     * @param pickupCode å–é¤ç 
                                     * @param merchantName å•†å®¶åç§°
                                     */
                                    public static void sendFocusNotification(Context context, String pickupCode, String merchantName) {
                                        // æ„å»ºé»˜è®¤ param_v2 JSON
                                        JsonObject paramV2 = new JsonObject();
                                        paramV2.addProperty("protocol", 1);
                                        paramV2.addProperty("aodTitle", "å–é¤ç : " + pickupCode);
                                        paramV2.addProperty("business", "order_pending");
                                        paramV2.addProperty("ticker", "å–é¤æé†’");
                                        paramV2.addProperty("isShowNotification", true);
                                        paramV2.addProperty("enableFloat", true);
                                        paramV2.addProperty("timeout", 60);
                                        paramV2.addProperty("updatable", true);
                                
                                        // baseInfo
                                        JsonObject baseInfo = new JsonObject();
                                        baseInfo.addProperty("type", 1);
                                        baseInfo.addProperty("title", pickupCode);
                                        baseInfo.addProperty("content", "å–é¤ç ");
                                        paramV2.add("baseInfo", baseInfo);
                                
                                        // hintInfo
                                        JsonObject hintInfo = new JsonObject();
                                        hintInfo.addProperty("type", 1);
                                        hintInfo.addProperty("title", merchantName);
                                        hintInfo.addProperty("content", "å•†å®¶");
                                        paramV2.add("hintInfo", hintInfo);
                                
                                        // param_island
                                        JsonObject paramIsland = new JsonObject();
                                        paramIsland.addProperty("islandProperty", 1);
                                        paramIsland.addProperty("islandTimeout", 900);
                                        paramIsland.addProperty("highlightColor", "#FFBB0F");
                                
                                        JsonObject bigIslandArea = new JsonObject();
                                
                                        JsonObject imageTextInfoLeft = new JsonObject();
                                        JsonObject textInfoLeft = new JsonObject();
                                        textInfoLeft.addProperty("title", "å–é¤ç ");
                                        textInfoLeft.addProperty("showHighlightColor", true);
                                        imageTextInfoLeft.add("textInfo", textInfoLeft);
                                        imageTextInfoLeft.addProperty("type", 1);
                                        bigIslandArea.add("imageTextInfoLeft", imageTextInfoLeft);
                                
                                        JsonObject imageTextInfoRight = new JsonObject();
                                        JsonObject textInfoRight = new JsonObject();
                                        textInfoRight.addProperty("title", pickupCode);
                                        imageTextInfoRight.add("textInfo", textInfoRight);
                                        imageTextInfoRight.addProperty("type", 2);
                                        bigIslandArea.add("imageTextInfoRight", imageTextInfoRight);
                                
                                        paramIsland.add("bigIslandArea", bigIslandArea);
                                        paramV2.add("param_island", paramIsland);
                                
                                        // è°ƒç”¨é€šç”¨å‘é€æ–¹æ³• (ä¸¤å‚æ•°è°ƒç”¨)
                                        sendFocusNotificationWithCustomParams(context, paramV2);
                                    }
                                
                                    /**
                                     * ã€æ–°å¢ã€‘æ˜¾ç¤º "è¯†åˆ«ä¸­" ç„¦ç‚¹é€šçŸ¥
                                     */
                                    public static void showRecognizing(Context context) {
                                        try {
                                            NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                                            createNotificationChannel(manager);
                                
                                            // æ„å»ºåŸç”Ÿé€šçŸ¥
                                            Notification.Builder builder;
                                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                                builder = new Notification.Builder(context, CHANNEL_ID);
                                            } else {
                                                builder = new Notification.Builder(context);
                                            }
                                
                                            // è®¾ç½®åŸºç¡€å†…å®¹
                                            builder.setContentTitle("è¯†åˆ«ä¸­...")
                                                    .setContentText("æ­£åœ¨ä½¿ç”¨ AI è¯†åˆ«å–é¤ç ...")
                                                    .setSmallIcon(android.R.drawable.ic_dialog_info)
                                                    .setOngoing(true) // æŒç»­æ˜¾ç¤º
                                                    .setAutoCancel(false) // ä¸è‡ªåŠ¨å–æ¶ˆ
                                                    .setShowWhen(true);
                                
                                            // æ„é€  "è¯†åˆ«ä¸­" çš„ param_v2 JSON
                                            JsonObject paramV2 = buildRecognizingParamV2();
                                            
                                            // æ„å»º extrasï¼ŒMIUI è¯»å–æ˜¾ç¤ºç„¦ç‚¹é€šçŸ¥
                                            Bundle bundle = new Bundle();
                                            // TODO: åœ¨æ‚¨çš„é¡¹ç›®é‡Œï¼Œå¯èƒ½éœ€è¦æ·»åŠ  "miui.focus.pics" Bundle æ¥æä¾› icon_logo
                                            bundle.putString("miui.focus.param", "{\"param_v2\":" + paramV2.toString() + "}");
                                            builder.addExtras(bundle);
                                
                                            // å‘é€é€šçŸ¥ï¼Œä½¿ç”¨å›ºå®šçš„ ID
                                            manager.notify(NOTIFICATION_ID_RECOGNIZING, builder.build());
                                
                                            Log.d(TAG, "Recognizing focus notification sent.");
                                        } catch (Exception e) {
                                            Log.e(TAG, "Send recognizing notification error", e);
                                        }
                                    }
                                
                                    /**
                                     * ã€æ–°å¢ã€‘å–æ¶ˆç„¦ç‚¹é€šçŸ¥
                                     */
                                    public static void cancelNotification(Context context, int notificationId) {
                                        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                                        if (notificationManager != null) {
                                            notificationManager.cancel(notificationId);
                                            Log.d(TAG, "Notification cancelled: " + notificationId);
                                        }
                                    }
                                
                                    /**
                                     * ä½¿ç”¨è‡ªå®šä¹‰ param_v2 JSON å‘é€ç„¦ç‚¹é€šçŸ¥
                                     * ã€æ¢å¤ä¸ºä¸¤å‚æ•°ã€‘
                                     * @param context ä¸Šä¸‹æ–‡
                                     * @param paramV2 è‡ªå®šä¹‰ param_v2
                                     */
                                    public static void sendFocusNotificationWithCustomParams(Context context, JsonObject paramV2) {
                                        try {
                                            NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                                            createNotificationChannel(manager);
                                
                                            // æ„å»ºåŸç”Ÿé€šçŸ¥
                                            Notification.Builder builder;
                                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                                builder = new Notification.Builder(context, CHANNEL_ID);
                                            } else {
                                                builder = new Notification.Builder(context);
                                            }
                                
                                            // è®¾ç½®åŸºç¡€å†…å®¹ï¼ˆä¾›æ™®é€š ROM æ˜¾ç¤ºï¼‰
                                            String title = "å–é¤ç ";
                                            String content = "";
                                            if (paramV2.has("baseInfo") && paramV2.get("baseInfo").isJsonObject()) {
                                                JsonObject baseInfo = paramV2.getAsJsonObject("baseInfo");
                                                if (baseInfo.has("title")) title = baseInfo.get("title").getAsString();
                                                if (baseInfo.has("content")) content = baseInfo.get("content").getAsString();
                                            }
                                
                                            builder.setContentTitle(title)
                                                    .setContentText(content)
                                                    .setSmallIcon(android.R.drawable.ic_dialog_info)
                                                    .setAutoCancel(true)
                                                    .setShowWhen(true);
                                
                                            // æ„å»º extrasï¼ŒMIUI è¯»å–æ˜¾ç¤ºç„¦ç‚¹é€šçŸ¥
                                            Bundle bundle = new Bundle();
                                            bundle.putString("miui.focus.param", "{\"param_v2\":" + paramV2.toString() + "}");
                                            builder.addExtras(bundle);
                                
                                            // ã€æ¢å¤ã€‘åœ¨è¿™é‡Œç”Ÿæˆ IDï¼Œä»¥ç¡®ä¿æ¯æ¬¡ç»“æœé€šçŸ¥éƒ½æ˜¯æ–°çš„ ID
                                            int notificationId = (int) (System.currentTimeMillis() / 1000);
                                
                                            // å‘é€é€šçŸ¥
                                            manager.notify(notificationId, builder.build());
                                
                                            Log.d(TAG, "Focus notification sent, param_v2=" + paramV2.toString());
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Send focus notification error", e);
                                        }
                                    }
                                
                                    /**
                                     * ã€æ–°å¢ã€‘æ„é€  "è¯†åˆ«ä¸­" çš„ MIUI ç„¦ç‚¹é€šçŸ¥å‚æ•° (FocusParam V2)
                                     */
                                    private static JsonObject buildRecognizingParamV2() {
                                        JsonObject paramV2 = new JsonObject();
                                        paramV2.addProperty("ticker", "è¯†åˆ«ä¸­");
                                        paramV2.addProperty("isShowNotification", true);
                                        paramV2.addProperty("enableFloat", true);
                                        
                                        // baseInfo
                                        JsonObject baseInfo = new JsonObject();
                                        baseInfo.addProperty("type", 1);
                                        baseInfo.addProperty("title", "è¯†åˆ«ä¸­...");
                                        baseInfo.addProperty("content", "æ­£åœ¨ä½¿ç”¨ AI è¯†åˆ«...");
                                        paramV2.add("baseInfo", baseInfo);
                                
                                        // param_island
                                        JsonObject paramIsland = new JsonObject();
                                        paramIsland.addProperty("islandProperty", 1);
                                        
                                        JsonObject bigIslandArea = new JsonObject();
                                        
                                        // å·¦ä¾§å›¾æ ‡ (å‡è®¾ icon_logo åœ¨ miui.focus.pics Bundle ä¸­)
                                        JsonObject imageTextInfoLeft = new JsonObject();
                                        JsonObject picInfo = new JsonObject();
                                        picInfo.addProperty("type", 1);
                                        picInfo.addProperty("pic", "icon_logo");
                                        imageTextInfoLeft.add("picInfo", picInfo);
                                        imageTextInfoLeft.addProperty("type", 1);
                                        bigIslandArea.add("imageTextInfoLeft", imageTextInfoLeft);
                                        
                                        // å³ä¾§æ–‡å­—
                                        JsonObject imageTextInfoRight = new JsonObject();
                                        JsonObject textInfoRight = new JsonObject();
                                        textInfoRight.addProperty("title", "è¯†åˆ«ä¸­");
                                        imageTextInfoRight.add("textInfo", textInfoRight);
                                        imageTextInfoRight.addProperty("type", 2);
                                        bigIslandArea.add("imageTextInfoRight", imageTextInfoRight);
                                        
                                        paramIsland.add("bigIslandArea", bigIslandArea);
                                        paramV2.add("param_island", paramIsland);
                                        
                                        return paramV2;
                                    }
                                
                                    /**
                                     * è¾…åŠ©æ–¹æ³•ï¼šåˆ›å»ºé€šçŸ¥æ¸ é“
                                     */
                                    private static void createNotificationChannel(NotificationManager manager) {
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                            if (manager.getNotificationChannel(CHANNEL_ID) == null) {
                                                NotificationChannel channel = new NotificationChannel(
                                                        CHANNEL_ID,
                                                        CHANNEL_NAME,
                                                        NotificationManager.IMPORTANCE_HIGH
                                                );
                                                channel.setDescription("ç”¨äºæ˜¾ç¤ºå–é¤ç çš„ç„¦ç‚¹é€šçŸ¥");
                                                manager.createNotificationChannel(channel);
                                            }
                                        }
                                    }
                                }

                            LogActivity.java
                                package com.test.hypernotification;
                                
                                import android.os.Bundle;
                                import android.text.method.ScrollingMovementMethod;
                                import android.view.View;
                                import android.widget.Button;
                                import android.widget.TextView;
                                
                                import androidx.appcompat.app.AppCompatActivity;
                                
                                /**
                                 * æ—¥å¿—æŸ¥çœ‹Activity
                                 */
                                public class LogActivity extends AppCompatActivity {
                                
                                    private TextView tvLogs;
                                    private Button btnClear;
                                    private Button btnRefresh;
                                
                                    @Override
                                    protected void onCreate(Bundle savedInstanceState) {
                                        super.onCreate(savedInstanceState);
                                        setContentView(R.layout.activity_log);
                                
                                        tvLogs = findViewById(R.id.tv_logs);
                                        btnClear = findViewById(R.id.btn_clear);
                                        btnRefresh = findViewById(R.id.btn_refresh);
                                
                                        tvLogs.setMovementMethod(new ScrollingMovementMethod());
                                
                                        btnClear.setOnClickListener(v -> {
                                            LogManager.getInstance().clearLogs();
                                            loadLogs();
                                        });
                                
                                        btnRefresh.setOnClickListener(v -> loadLogs());
                                
                                        loadLogs();
                                    }
                                
                                    private void loadLogs() {
                                        String logs = LogManager.getInstance().getAllLogs();
                                        tvLogs.setText(logs);
                                    }

                            LogManager.java
                                package com.test.hypernotification;
                                
                                import java.text.SimpleDateFormat;
                                import java.util.ArrayList;
                                import java.util.Date;
                                import java.util.List;
                                import java.util.Locale;
                                
                                /**
                                 * æ—¥å¿—ç®¡ç†å™¨
                                 */
                                public class LogManager {
                                    private static LogManager instance;
                                    private List<String> logs;
                                    private static final int MAX_LOGS = 500;
                                
                                    private LogManager() {
                                        logs = new ArrayList<>();
                                    }
                                
                                    public static synchronized LogManager getInstance() {
                                        if (instance == null) {
                                            instance = new LogManager();
                                        }
                                        return instance;
                                    }
                                
                                    public void addLog(String message) {
                                        synchronized (logs) {
                                            String timestamp = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.getDefault())
                                                .format(new Date());
                                            logs.add(timestamp + " - " + message);
                                
                                            // é™åˆ¶æ—¥å¿—æ•°é‡
                                            if (logs.size() > MAX_LOGS) {
                                                logs.remove(0);
                                            }
                                        }
                                    }
                                
                                    public String getAllLogs() {
                                        synchronized (logs) {
                                            StringBuilder sb = new StringBuilder();
                                            for (int i = logs.size() - 1; i >= 0; i--) {
                                                sb.append(logs.get(i)).append("
");
                                            }
                                            return sb.toString();
                                        }
                                    }
                                
                                    public void clearLogs() {
                                        synchronized (logs) {
                                            logs.clear();
                                        }
                                    }

                            MainActivity.java
                                package com.test.hypernotification;
                                
                                import android.Manifest;
                                import android.app.Activity;
                                import android.content.Context;
                                import android.content.Intent;
                                import android.content.SharedPreferences;
                                import android.content.pm.PackageManager;
                                import android.media.projection.MediaProjectionManager;
                                import android.os.Build;
                                import android.os.Bundle;
                                import android.os.Environment;
                                import android.provider.Settings;
                                import android.text.TextUtils;
                                import android.view.View;
                                import android.widget.Button;
                                import android.widget.EditText;
                                import android.widget.ScrollView;
                                import android.widget.Switch;
                                import android.widget.TextView;
                                import android.widget.Toast;
                                
                                import androidx.annotation.NonNull;
                                import androidx.annotation.Nullable;
                                import androidx.appcompat.app.AppCompatActivity;
                                import androidx.core.app.ActivityCompat;
                                import androidx.core.content.ContextCompat;
                                
                                import java.text.SimpleDateFormat;
                                import java.util.Date;
                                import java.util.Locale;
                                
                                public class MainActivity extends AppCompatActivity {
                                    private static final int REQUEST_PERMISSIONS = 100;
                                    private static final int REQUEST_SCREEN_CAPTURE = 101;
                                
                                    private EditText etToken;
                                    private EditText etPicgoKey;
                                    private EditText etPicgoUrl;
                                    private EditText etAlbumId;
                                    private Button btnSave;
                                    private Button btnRun;
                                    private Button btnViewLog;
                                    private TextView tvStatus;
                                    private ScrollView scrollView;
                                    private Switch switchRootMode;
                                
                                    private SharedPreferences prefs;
                                    private MediaProjectionManager mediaProjectionManager;
                                
                                    @Override
                                    protected void onCreate(Bundle savedInstanceState) {
                                        super.onCreate(savedInstanceState);
                                        setContentView(R.layout.activity_main);
                                
                                        initViews();
                                        loadPreferences();
                                        checkPermissions();
                                
                                        mediaProjectionManager = (MediaProjectionManager) getSystemService(Context.MEDIA_PROJECTION_SERVICE);
                                    }
                                
                                    private void initViews() {
                                        etToken = findViewById(R.id.et_token);
                                        etPicgoKey = findViewById(R.id.et_picgo_key);
                                        etPicgoUrl = findViewById(R.id.et_picgo_url);
                                        etAlbumId = findViewById(R.id.et_album_id);
                                        btnSave = findViewById(R.id.btn_save);
                                        btnRun = findViewById(R.id.btn_run);
                                        btnViewLog = findViewById(R.id.btn_view_log);
                                        tvStatus = findViewById(R.id.tv_status);
                                        scrollView = findViewById(R.id.scroll_view);
                                        switchRootMode = findViewById(R.id.switch_root_mode);
                                
                                        prefs = getSharedPreferences("config", MODE_PRIVATE);
                                
                                        etPicgoUrl.setText("https://www.picgo.net/api/1/upload");
                                        switchRootMode.setChecked(prefs.getBoolean("use_root_mode", false));
                                
                                        if (switchRootMode.isChecked()) {
                                            checkRootAccess();
                                        }
                                
                                        switchRootMode.setOnCheckedChangeListener((buttonView, isChecked) -> {
                                            if (isChecked) {
                                                if (RootScreenshotHelper.isRootAvailable()) {
                                                    prefs.edit().putBoolean("use_root_mode", true).apply();
                                                    updateStatus("å·²å¯ç”¨ Root æ¨¡å¼æˆªå›¾");
                                                } else {
                                                    switchRootMode.setChecked(false);
                                                    Toast.makeText(this, "Root æƒé™ä¸å¯ç”¨", Toast.LENGTH_SHORT).show();
                                                    prefs.edit().putBoolean("use_root_mode", false).apply();
                                                }
                                            } else {
                                                prefs.edit().putBoolean("use_root_mode", false).apply();
                                                updateStatus("å·²åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼æˆªå›¾");
                                            }
                                        });
                                
                                        btnSave.setOnClickListener(v -> saveConfiguration());
                                        btnRun.setOnClickListener(v -> runPickupCodeRecognition());
                                        btnViewLog.setOnClickListener(v -> {
                                            Intent intent = new Intent(this, LogActivity.class);
                                            startActivity(intent);
                                        });
                                    }
                                
                                    private void checkRootAccess() {
                                        if (!RootScreenshotHelper.isRootAvailable()) {
                                            switchRootMode.setChecked(false);
                                            prefs.edit().putBoolean("use_root_mode", false).apply();
                                            Toast.makeText(this, "Root æƒé™ä¸å¯ç”¨ï¼Œå·²åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼", Toast.LENGTH_SHORT).show();
                                        }
                                    }
                                
                                    private void loadPreferences() {
                                        etToken.setText(prefs.getString("token", ""));
                                        etPicgoKey.setText(prefs.getString("picgo_key", ""));
                                        etPicgoUrl.setText(prefs.getString("picgo_url", "https://www.picgo.net/api/1/upload"));
                                        etAlbumId.setText(prefs.getString("album_id", ""));
                                    }
                                
                                    private void saveConfiguration() {
                                        String token = etToken.getText().toString().trim();
                                        String picgoKey = etPicgoKey.getText().toString().trim();
                                        String picgoUrl = etPicgoUrl.getText().toString().trim();
                                        String albumId = etAlbumId.getText().toString().trim();
                                
                                        if (TextUtils.isEmpty(token) || TextUtils.isEmpty(picgoKey) ||
                                            TextUtils.isEmpty(picgoUrl) || TextUtils.isEmpty(albumId)) {
                                            Toast.makeText(this, "è¯·å¡«å†™æ‰€æœ‰é…ç½®é¡¹", Toast.LENGTH_SHORT).show();
                                            return;
                                        }
                                
                                        SharedPreferences.Editor editor = prefs.edit();
                                        editor.putString("token", token);
                                        editor.putString("picgo_key", picgoKey);
                                        editor.putString("picgo_url", picgoUrl);
                                        editor.putString("album_id", albumId);
                                        editor.apply();
                                
                                        Toast.makeText(this, "é…ç½®å·²ä¿å­˜", Toast.LENGTH_SHORT).show();
                                        updateStatus("é…ç½®å·²ä¿å­˜");
                                    }
                                
                                    private void runPickupCodeRecognition() {
                                        if (TextUtils.isEmpty(prefs.getString("token", "")) ||
                                            TextUtils.isEmpty(prefs.getString("picgo_key", "")) ||
                                            TextUtils.isEmpty(prefs.getString("album_id", ""))) {
                                            Toast.makeText(this, "è¯·å…ˆä¿å­˜é…ç½®", Toast.LENGTH_SHORT).show();
                                            return;
                                        }
                                
                                        boolean useRootMode = prefs.getBoolean("use_root_mode", false);
                                
                                        if (useRootMode) {
                                            updateStatus("ä½¿ç”¨ Root æ¨¡å¼æˆªå›¾...");
                                            if (RootScreenshotHelper.takeScreenshot(this)) {
                                                updateStatus("Root æˆªå›¾æˆåŠŸï¼Œå¯åŠ¨å‰å°è¯†åˆ«æœåŠ¡...");
                                                new android.os.Handler().postDelayed(() -> startRecognitionService(), 500);
                                            } else {
                                                updateStatus("Root æˆªå›¾å¤±è´¥");
                                                Toast.makeText(this, "Root æˆªå›¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æƒé™", Toast.LENGTH_SHORT).show();
                                            }
                                        } else {
                                            startActivityForResult(
                                                mediaProjectionManager.createScreenCaptureIntent(),
                                                REQUEST_SCREEN_CAPTURE
                                            );
                                        }
                                    }
                                
                                    private void startRecognitionService() {
                                        Intent serviceIntent = new Intent(this, RecognitionService.class);
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                            startForegroundService(serviceIntent);
                                        } else {
                                            startService(serviceIntent);
                                        }
                                    }
                                
                                    private void checkPermissions() {
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {
                                            if (ContextCompat.checkSelfPermission(this, Manifest.permission.POST_NOTIFICATIONS)
                                                != PackageManager.PERMISSION_GRANTED) {
                                                ActivityCompat.requestPermissions(this,
                                                    new String[]{Manifest.permission.POST_NOTIFICATIONS},
                                                    REQUEST_PERMISSIONS);
                                            }
                                        }
                                    }
                                
                                    @Override
                                    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
                                        super.onActivityResult(requestCode, resultCode, data);
                                
                                        if (requestCode == REQUEST_SCREEN_CAPTURE) {
                                            if (resultCode == Activity.RESULT_OK && data != null) {
                                                updateStatus("å¼€å§‹æˆªå±...");
                                
                                                Intent serviceIntent = new Intent(this, ScreenCaptureService.class);
                                                serviceIntent.putExtra("resultCode", resultCode);
                                                serviceIntent.putExtra("data", data);
                                                startService(serviceIntent);
                                
                                                new android.os.Handler().postDelayed(() -> startRecognitionService(), 1000);
                                            } else {
                                                updateStatus("æˆªå±æƒé™è¢«æ‹’ç»");
                                            }
                                        }
                                    }
                                
                                    @Override
                                    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,
                                                                          @NonNull int[] grantResults) {
                                        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
                                        if (requestCode == REQUEST_PERMISSIONS) {
                                            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                                                Toast.makeText(this, "æƒé™å·²æˆäºˆ", Toast.LENGTH_SHORT).show();
                                            }
                                        }
                                    }
                                
                                    private void updateStatus(String status) {
                                        runOnUiThread(() -> {
                                            String timestamp = new SimpleDateFormat("HH:mm:ss", Locale.getDefault())
                                                .format(new Date());
                                            String message = String.format("[%s] %s
", timestamp, status);
                                            tvStatus.append(message);
                                
                                            scrollView.post(() -> scrollView.fullScroll(View.FOCUS_DOWN));
                                
                                            LogManager.getInstance().addLog(message);
                                        });
                                    }

                            MainActivityNew.java
                                package com.test.hypernotification;
                                
                                import android.Manifest;
                                import android.app.Activity;
                                import android.content.Context;
                                import android.content.Intent;
                                import android.content.SharedPreferences;
                                import android.content.pm.PackageManager;
                                import android.media.projection.MediaProjectionManager;
                                import android.os.Build;
                                import android.os.Bundle;
                                import android.text.TextUtils;
                                import android.widget.Toast;
                                
                                import androidx.annotation.NonNull;
                                import androidx.annotation.Nullable;
                                import androidx.appcompat.app.AppCompatActivity;
                                import androidx.appcompat.widget.Toolbar;
                                import androidx.core.app.ActivityCompat;
                                import androidx.core.content.ContextCompat;
                                import androidx.viewpager2.widget.ViewPager2;
                                
                                import com.google.android.material.floatingactionbutton.FloatingActionButton;
                                import com.google.android.material.tabs.TabLayout;
                                import com.google.android.material.tabs.TabLayoutMediator;
                                
                                public class MainActivityNew extends AppCompatActivity {
                                    private static final int REQUEST_PERMISSIONS = 100;
                                    private static final int REQUEST_SCREEN_CAPTURE = 101;
                                
                                    private TabLayout tabLayout;
                                    private ViewPager2 viewPager;
                                    private FloatingActionButton fabRun;
                                    private MainPagerAdapter pagerAdapter;
                                
                                    private SharedPreferences prefs;
                                    private MediaProjectionManager mediaProjectionManager;
                                
                                    @Override
                                    protected void onCreate(Bundle savedInstanceState) {
                                        super.onCreate(savedInstanceState);
                                        setContentView(R.layout.activity_main_tabs);
                                
                                        initViews();
                                        setupViewPager();
                                        checkPermissions();
                                
                                        mediaProjectionManager = (MediaProjectionManager) getSystemService(Context.MEDIA_PROJECTION_SERVICE);
                                    }
                                
                                    private void initViews() {
                                        Toolbar toolbar = findViewById(R.id.toolbar);
                                        setSupportActionBar(toolbar);
                                
                                        tabLayout = findViewById(R.id.tabs);
                                        viewPager = findViewById(R.id.viewpager);
                                        fabRun = findViewById(R.id.fab_run);
                                
                                        prefs = getSharedPreferences("config", MODE_PRIVATE);
                                
                                        fabRun.setOnClickListener(v -> runPickupCodeRecognition());
                                    }
                                
                                    private void setupViewPager() {
                                        pagerAdapter = new MainPagerAdapter(this);
                                        viewPager.setAdapter(pagerAdapter);
                                
                                        new TabLayoutMediator(tabLayout, viewPager, (tab, position) -> {
                                            tab.setText(pagerAdapter.getTabTitle(position));
                                        }).attach();
                                
                                        viewPager.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {
                                            @Override
                                            public void onPageSelected(int position) {
                                                super.onPageSelected(position);
                                
                                                // çŠ¶æ€é¡µæ˜¾ç¤º FABï¼Œè®¾ç½®é¡µéšè— FAB
                                                if (position == 1) {
                                                    fabRun.show();
                                                } else {
                                                    fabRun.hide();
                                                }
                                            }
                                        });
                                
                                        fabRun.hide(); // é»˜è®¤åœ¨è®¾ç½®é¡µï¼Œéšè—
                                    }
                                
                                    private void runPickupCodeRecognition() {
                                        if (TextUtils.isEmpty(prefs.getString("token", "")) ||
                                            TextUtils.isEmpty(prefs.getString("picgo_key", "")) ||
                                            TextUtils.isEmpty(prefs.getString("album_id", ""))) {
                                
                                            Toast.makeText(this, "è¯·å…ˆåœ¨è®¾ç½®é¡µé¢ä¿å­˜é…ç½®", Toast.LENGTH_SHORT).show();
                                
                                            viewPager.setCurrentItem(0);
                                            return;
                                        }
                                
                                        // åˆ‡åˆ°çŠ¶æ€é¡µ
                                        viewPager.setCurrentItem(1);
                                
                                        boolean useRootMode = prefs.getBoolean("use_root_mode", false);
                                
                                        if (useRootMode) {
                                            updateStatus("ä½¿ç”¨ Root æ¨¡å¼æˆªå›¾...");
                                
                                            if (RootScreenshotHelper.takeScreenshot(this)) {
                                                updateStatus("Root æˆªå›¾æˆåŠŸï¼Œå¯åŠ¨å‰å°è¯†åˆ«æœåŠ¡...");
                                
                                                new android.os.Handler().postDelayed(
                                                        this::startRecognitionService,
                                                        500
                                                );
                                
                                            } else {
                                                updateStatus("Root æˆªå›¾å¤±è´¥");
                                                Toast.makeText(this, "Root æˆªå›¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æƒé™", Toast.LENGTH_SHORT).show();
                                            }
                                
                                        } else {
                                            startActivityForResult(
                                                    mediaProjectionManager.createScreenCaptureIntent(),
                                                    REQUEST_SCREEN_CAPTURE
                                            );
                                        }
                                    }
                                
                                    private void startRecognitionService() {
                                        Intent serviceIntent = new Intent(this, RecognitionService.class);
                                
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                            startForegroundService(serviceIntent);
                                        } else {
                                            startService(serviceIntent);
                                        }
                                    }
                                
                                    private void checkPermissions() {
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {
                                            if (ContextCompat.checkSelfPermission(this, Manifest.permission.POST_NOTIFICATIONS)
                                                != PackageManager.PERMISSION_GRANTED) {
                                
                                                ActivityCompat.requestPermissions(
                                                        this,
                                                        new String[]{Manifest.permission.POST_NOTIFICATIONS},
                                                        REQUEST_PERMISSIONS
                                                );
                                            }
                                        }
                                    }
                                
                                    @Override
                                    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
                                        super.onActivityResult(requestCode, resultCode, data);
                                
                                        if (requestCode == REQUEST_SCREEN_CAPTURE) {
                                
                                            if (resultCode == Activity.RESULT_OK && data != null) {
                                
                                                updateStatus("å¼€å§‹æˆªå±...");
                                
                                                Intent serviceIntent = new Intent(this, ScreenCaptureService.class);
                                                serviceIntent.putExtra("resultCode", resultCode);
                                                serviceIntent.putExtra("data", data);
                                                startService(serviceIntent);
                                
                                                new android.os.Handler().postDelayed(
                                                        this::startRecognitionService,
                                                        1000
                                                );
                                
                                            } else {
                                                updateStatus("æˆªå±æƒé™è¢«æ‹’ç»");
                                            }
                                        }
                                    }
                                
                                    @Override
                                    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,
                                                                           @NonNull int[] grantResults) {
                                        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
                                
                                        if (requestCode == REQUEST_PERMISSIONS) {
                                            if (grantResults.length > 0 &&
                                                grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                                
                                                Toast.makeText(this, "æƒé™å·²æˆäºˆ", Toast.LENGTH_SHORT).show();
                                            }
                                        }
                                    }
                                
                                    private void updateStatus(String status) {
                                        StatusFragment statusFragment = StatusFragment.getInstance();
                                
                                        if (statusFragment != null) {
                                            statusFragment.onStatusUpdate(status);
                                        }
                                    }

                            MainPagerAdapter.java
                                package com.test.hypernotification;
                                
                                import androidx.annotation.NonNull;
                                import androidx.fragment.app.Fragment;
                                import androidx.fragment.app.FragmentActivity;
                                import androidx.viewpager2.adapter.FragmentStateAdapter;
                                
                                public class MainPagerAdapter extends FragmentStateAdapter {
                                
                                    public MainPagerAdapter(@NonNull FragmentActivity fragmentActivity) {
                                        super(fragmentActivity);
                                    }
                                
                                    @NonNull
                                    @Override
                                    public Fragment createFragment(int position) {
                                        switch (position) {
                                            case 0:
                                                return new SettingsFragment();
                                            case 1:
                                                return new StatusFragment();
                                            case 2:
                                                return new TestFragment();  // â˜… æ–°å¢æµ‹è¯•é¡µ
                                            default:
                                                return new SettingsFragment();
                                        }
                                    }
                                
                                    @Override
                                    public int getItemCount() {
                                        return 3; // â˜… æ”¹ä¸º 3 ä¸ªé¡µé¢
                                    }
                                
                                    public String getTabTitle(int position) {
                                        switch (position) {
                                            case 0:
                                                return "è®¾ç½®";
                                            case 1:
                                                return "çŠ¶æ€";
                                            case 2:
                                                return "æµ‹è¯•"; // â˜… æ–°æ ‡ç­¾
                                            default:
                                                return "";
                                        }
                                    }

                            PickupCodeService.java
                                package com.test.hypernotification;
                                
                                import android.content.Context;
                                import android.content.SharedPreferences;
                                import android.graphics.Bitmap;
                                import android.graphics.BitmapFactory;
                                import android.os.Environment;
                                import android.util.Base64;
                                import android.util.Log;
                                
                                import com.google.gson.Gson;
                                import com.google.gson.JsonArray;
                                import com.google.gson.JsonObject;
                                import com.google.gson.JsonParser;
                                
                                import java.io.File;
                                import java.io.FileInputStream;
                                import java.io.InputStreamReader;
                                import java.util.concurrent.ExecutorService;
                                import java.util.concurrent.Executors;
                                
                                import okhttp3.MediaType;
                                import okhttp3.MultipartBody;
                                import okhttp3.OkHttpClient;
                                import okhttp3.Request;
                                import okhttp3.RequestBody;
                                import okhttp3.Response;
                                
                                /**
                                 * PickupCodeService
                                 * ä¿æŒåŸæœ‰åŠŸèƒ½ï¼Œå¢åŠ è¯†åˆ«å®Œæˆå›è°ƒæ¥å£ä¾› RecognitionService ä½¿ç”¨ã€‚
                                 */
                                public class PickupCodeService {
                                    private static final String TAG = "PickupCodeService";
                                
                                    private Context context;
                                    private SharedPreferences prefs;
                                    private StatusCallback statusCallback;
                                    private ExecutorService executor;
                                    private OkHttpClient client;
                                    private Gson gson;
                                
                                    // é…ç½®å‚æ•°
                                    private String token;
                                    private String picgoKey;
                                    private String picgoUrl;
                                    private String albumId;
                                
                                    public interface StatusCallback {
                                        void onStatusUpdate(String status);
                                    }
                                
                                    /**
                                     * ä¾›å‰å°æœåŠ¡ä½¿ç”¨çš„å®Œæˆå›è°ƒ
                                     */
                                    public interface RecognitionListener {
                                        void onFinished();
                                    }
                                
                                    public PickupCodeService(Context context) {
                                        this.context = context;
                                        this.prefs = context.getSharedPreferences("config", Context.MODE_PRIVATE);
                                        this.executor = Executors.newSingleThreadExecutor();
                                        this.client = new OkHttpClient.Builder()
                                                .connectTimeout(30, java.util.concurrent.TimeUnit.SECONDS)
                                                .readTimeout(30, java.util.concurrent.TimeUnit.SECONDS)
                                                .writeTimeout(30, java.util.concurrent.TimeUnit.SECONDS)
                                                .build();
                                        this.gson = new Gson();
                                
                                        loadConfiguration();
                                    }
                                
                                    private void loadConfiguration() {
                                        token = prefs.getString("token", "");
                                        picgoKey = prefs.getString("picgo_key", "");
                                        picgoUrl = prefs.getString("picgo_url", "https://www.picgo.net/api/1/upload");
                                        albumId = prefs.getString("album_id", "");
                                    }
                                
                                    public void setStatusCallback(StatusCallback callback) {
                                        this.statusCallback = callback;
                                    }
                                
                                    /**
                                     * å…¼å®¹æ—§æ–¹æ³•ï¼šä¸ä¼ å›è°ƒ
                                     */
                                    public void startRecognition() {
                                        startRecognition(null);
                                    }
                                
                                    /**
                                     * æ–°æ–¹æ³•ï¼šè¯†åˆ«å®Œæˆåä¼šè°ƒç”¨ listener.onFinished()
                                     */
                                    public void startRecognition(final RecognitionListener listener) {
                                        executor.execute(() -> {
                                            android.os.PowerManager powerManager = null;
                                            android.os.PowerManager.WakeLock wakeLock = null;
                                
                                            try {
                                                // è·å–WakeLocké˜²æ­¢CPUä¼‘çœ ï¼ˆæ³¨æ„ï¼šåªä¿è¯CPUä¸ä¼‘çœ ï¼‰
                                                powerManager = (android.os.PowerManager) context.getSystemService(android.content.Context.POWER_SERVICE);
                                                wakeLock = powerManager.newWakeLock(
                                                        android.os.PowerManager.PARTIAL_WAKE_LOCK,
                                                        "HyperNotification:RecognitionWakeLock"
                                                );
                                                wakeLock.acquire(120 * 1000L); // 120ç§’è¶…æ—¶
                                
                                                // æ˜¾ç¤ºâ€œè¯†åˆ«ä¸­â€ç„¦ç‚¹é€šçŸ¥ï¼ˆå¦‚æœæ”¯æŒï¼‰
                                                FocusNotificationHelper.showRecognizing(context);
                                                updateStatus("ğŸ”” æ˜¾ç¤º\"è¯†åˆ«ä¸­\"ç„¦ç‚¹é€šçŸ¥");
                                
                                                RecognitionResult result = null;
                                
                                                try {
                                                    updateStatus("ğŸ”§ å¼€å§‹æ‰§è¡Œè¯†åˆ«æµç¨‹");
                                
                                                    // 2. æˆªå›¾
                                                    updateStatus("ğŸ“¸ æ­£åœ¨æˆªå›¾...");
                                                    String imagePath = captureScreen();
                                                    if (imagePath == null) {
                                                        updateStatus("âŒ æˆªå›¾å¤±è´¥");
                                                        return;
                                                    }
                                                    updateStatus("âœ… æˆªå›¾æˆåŠŸ: " + imagePath);
                                
                                                    // 3. ä¸Šä¼ å›¾ç‰‡
                                                    updateStatus("ğŸ“¤ ä¸Šä¼ å›¾ç‰‡åˆ°PicGo...");
                                                    String imageUrl = uploadImage(imagePath);
                                                    if (imageUrl == null) {
                                                        updateStatus("âŒ å›¾ç‰‡ä¸Šä¼ å¤±è´¥");
                                                        return;
                                                    }
                                                    updateStatus("âœ… å›¾ç‰‡ä¸Šä¼ æˆåŠŸ");
                                                    updateStatus("å›¾ç‰‡URL: " + imageUrl);
                                
                                                    // 4. AIè¯†åˆ«
                                                    updateStatus("ğŸ¤– æ­£åœ¨è¿›è¡ŒAIè¯†åˆ«...");
                                                    result = recognizeWithAI(imageUrl);
                                                    if (result == null) {
                                                        updateStatus("âŒ AIè¯†åˆ«å¤±è´¥");
                                                        return;
                                                    }
                                                    updateStatus("âœ… AIè¯†åˆ«æˆåŠŸ");
                                
                                                    // 5. æ˜¾ç¤ºç»“æœ
                                                    updateStatus("==========================================");
                                                    updateStatus("è¯†åˆ«ç»“æœï¼š");
                                                    updateStatus("  å–é¤ç : " + result.pickupCode);
                                                    updateStatus("  å•†å®¶: " + result.merchantName);
                                                    updateStatus("==========================================");
                                
                                                    // 6. å‘é€æœ€ç»ˆç»“æœç„¦ç‚¹é€šçŸ¥
                                                    updateStatus("ğŸ”” å‘é€ç»“æœç„¦ç‚¹é€šçŸ¥...");
                                                    sendFocusNotification(result);
                                                    updateStatus("âœ… ç„¦ç‚¹é€šçŸ¥å·²å‘é€");
                                
                                                    updateStatus("âœ… æµç¨‹å®Œæˆ");
                                
                                                } catch (Exception e) {
                                                    Log.e(TAG, "Recognition error", e);
                                                    updateStatus("âŒ å‘ç”Ÿé”™è¯¯: " + e.getMessage());
                                                } finally {
                                                    // æ— è®ºæˆåŠŸå¤±è´¥ï¼Œéƒ½å–æ¶ˆâ€œè¯†åˆ«ä¸­â€é€šçŸ¥
                                                    FocusNotificationHelper.cancelNotification(context, FocusNotificationHelper.NOTIFICATION_ID_RECOGNIZING);
                                                    updateStatus("ğŸ”” å–æ¶ˆ\"è¯†åˆ«ä¸­\"ç„¦ç‚¹é€šçŸ¥");
                                                }
                                
                                            } catch (Exception e) {
                                                Log.e(TAG, "WakeLock error", e);
                                                updateStatus("âŒ WakeLocké”™è¯¯: " + e.getMessage());
                                            } finally {
                                                // é‡Šæ”¾WakeLock
                                                if (wakeLock != null && wakeLock.isHeld()) {
                                                    wakeLock.release();
                                                    updateStatus("ğŸ”‹ é‡Šæ”¾WakeLock");
                                                }
                                
                                                // é€šçŸ¥è°ƒç”¨æ–¹ï¼ˆå‰å°æœåŠ¡ï¼‰è¯†åˆ«å·²ç»“æŸ
                                                if (listener != null) {
                                                    try {
                                                        listener.onFinished();
                                                    } catch (Exception e) {
                                                        Log.e(TAG, "onFinished callback error", e);
                                                    }
                                                }
                                            }
                                        });
                                    }
                                
                                    private String captureScreen() {
                                        try {
                                            // ä½¿ç”¨rootå‘½ä»¤æˆªå›¾
                                            String imagePath = context.getExternalFilesDir(Environment.DIRECTORY_PICTURES)
                                                    + "/pickup_screen.png";
                                
                                            Process process = Runtime.getRuntime().exec(new String[] {
                                                    "su", "-c", "screencap -p " + imagePath
                                            });
                                
                                            int exitCode = process.waitFor();
                                            if (exitCode == 0) {
                                                File file = new File(imagePath);
                                                if (file.exists() && file.length() > 0) {
                                                    // ä¿å­˜ä¸º ScreenCaptureService çš„ lastScreenshot ä»¥ä¾¿å…¼å®¹å…¶ä»–é€»è¾‘
                                                    ScreenCaptureService.setLastScreenshot(file);
                                                    return imagePath;
                                                }
                                            }
                                
                                            // å¦‚æœrootå¤±è´¥ï¼Œå°è¯•ä½¿ç”¨MediaProjectionï¼ˆScreenCaptureService æä¾›ï¼‰
                                            File screenshotFile = ScreenCaptureService.getLastScreenshot();
                                            if (screenshotFile != null && screenshotFile.exists()) {
                                                return screenshotFile.getAbsolutePath();
                                            }
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Capture screen error", e);
                                        }
                                        return null;
                                    }
                                
                                    private String uploadImage(String imagePath) {
                                        try {
                                            File file = new File(imagePath);
                                            if (!file.exists()) {
                                                return null;
                                            }
                                
                                            RequestBody requestBody = new MultipartBody.Builder()
                                                    .setType(MultipartBody.FORM)
                                                    .addFormDataPart("source", file.getName(),
                                                            RequestBody.create(file, MediaType.parse("image/png")))
                                                    .addFormDataPart("album_id", albumId)
                                                    .addFormDataPart("format", "json")
                                                    .build();
                                
                                            Request request = new Request.Builder()
                                                    .url(picgoUrl)
                                                    .header("X-API-Key", picgoKey)
                                                    .post(requestBody)
                                                    .build();
                                
                                            try (Response response = client.newCall(request).execute()) {
                                                if (response.isSuccessful() && response.body() != null) {
                                                    String responseBody = response.body().string();
                                                    JsonObject json = JsonParser.parseString(responseBody).getAsJsonObject();
                                
                                                    if (json.has("image") && json.getAsJsonObject("image").has("url")) {
                                                        return json.getAsJsonObject("image").get("url").getAsString();
                                                    }
                                                }
                                            }
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Upload image error", e);
                                            updateStatus("âŒ å›¾ç‰‡ä¸Šä¼ å¼‚å¸¸: " + e.getMessage());
                                        }
                                        return null;
                                    }
                                
                                    private RecognitionResult recognizeWithAI(String imageUrl) {
                                        try {
                                            JsonObject requestJson = new JsonObject();
                                            requestJson.addProperty("model", "glm-4v-flash");
                                
                                            JsonArray messages = new JsonArray();
                                            JsonObject message = new JsonObject();
                                            message.addProperty("role", "user");
                                
                                            JsonArray content = new JsonArray();
                                
                                            JsonObject imageContent = new JsonObject();
                                            imageContent.addProperty("type", "image_url");
                                            JsonObject imageUrlObj = new JsonObject();
                                            imageUrlObj.addProperty("url", imageUrl);
                                            imageContent.add("image_url", imageUrlObj);
                                            content.add(imageContent);
                                
                                            JsonObject textContent = new JsonObject();
                                            textContent.addProperty("type", "text");
                                            textContent.addProperty("text",
                                                    "è¯·è¯†åˆ«å›¾ç‰‡ä¸­çš„å–é¤ç å’Œå•†å®¶åç§°ã€‚ç›´æ¥è¿”å›çº¯JSONæ ¼å¼ï¼š{\"pickup_code\":\"å–é¤ç å†…å®¹\",\"merchant_name\":\"å•†å®¶åç§°\"}");
                                            content.add(textContent);
                                
                                            message.add("content", content);
                                            messages.add(message);
                                            requestJson.add("messages", messages);
                                            requestJson.addProperty("temperature", 0.1);
                                
                                            RequestBody body = RequestBody.create(
                                                    requestJson.toString(),
                                                    MediaType.parse("application/json")
                                            );
                                
                                            Request request = new Request.Builder()
                                                    .url("https://open.bigmodel.cn/api/paas/v4/chat/completions")
                                                    .header("Authorization", "Bearer " + token)
                                                    .header("Content-Type", "application/json")
                                                    .post(body)
                                                    .build();
                                
                                            try (Response response = client.newCall(request).execute()) {
                                                String responseBody = response.body() != null ? response.body().string() : "";
                                
                                                updateStatus("ğŸ“ AIåŸå§‹å“åº”:");
                                                updateStatus("==========================================");
                                                updateStatus(responseBody);
                                                updateStatus("==========================================");
                                
                                                if (response.isSuccessful()) {
                                                    JsonObject json = JsonParser.parseString(responseBody).getAsJsonObject();
                                
                                                    if (json.has("choices")) {
                                                        JsonArray choices = json.getAsJsonArray("choices");
                                                        if (choices.size() > 0) {
                                                            JsonObject choice = choices.get(0).getAsJsonObject();
                                                            if (choice.has("message")) {
                                                                JsonObject msg = choice.getAsJsonObject("message");
                                                                if (msg.has("content")) {
                                                                    String aiContent = msg.get("content").getAsString();
                                                                    updateStatus("ğŸ¤– AIè¿”å›å†…å®¹:");
                                                                    updateStatus(aiContent);
                                                                    return parseRecognitionResult(aiContent);
                                                                }
                                                            }
                                                        }
                                                    } else if (json.has("error")) {
                                                        JsonObject error = json.getAsJsonObject("error");
                                                        String errorMsg = error.has("message") ?
                                                                error.get("message").getAsString() : "æœªçŸ¥é”™è¯¯";
                                                        updateStatus("âŒ AI APIé”™è¯¯: " + errorMsg);
                                                    }
                                                } else {
                                                    updateStatus("âŒ AI APIè¯·æ±‚å¤±è´¥, HTTPçŠ¶æ€ç : " + response.code());
                                                }
                                            }
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "AI recognition error", e);
                                            updateStatus("âŒ AIè¯†åˆ«å¼‚å¸¸: " + e.getMessage());
                                        }
                                        return null;
                                    }
                                
                                    // parseRecognitionResult / extractWithRegex / sendFocusNotification / updateStatus ç­‰æ–¹æ³•
                                    // ä¸ºäº†ä¸æ”¹å˜å·²æœ‰é€»è¾‘ï¼Œè¿™é‡ŒæŠŠåŸæ¥å®ç°ä¿ç•™ï¼ˆä¸æ‚¨åŸé¡¹ç›®ä¸€è‡´ï¼‰ã€‚
                                    // ä¸‹é¢ç®€åŒ–å±•ç¤ºï¼šä½ å¯ä»¥å¤åˆ¶ä¹‹å‰æ–‡ä»¶ä¸­å®Œæ•´çš„ parseRecognitionResultã€extractWithRegexã€sendFocusNotificationã€updateStatus å®ç°ã€‚
                                
                                    private RecognitionResult parseRecognitionResult(String content) {
                                        // è¿™é‡Œä¿ç•™ä½ åŸæ¥çš„å®ç°ï¼ˆç”¨äºè§£æAIè¿”å›ï¼‰
                                        RecognitionResult result = new RecognitionResult();
                                        result.pickupCode = "æœªè¯†åˆ«";
                                        result.merchantName = "æœªçŸ¥å•†å®¶";
                                        try {
                                            // -------------------------------------------------------
                                            // å°†ä½ åŸæ¥çš„è§£æé€»è¾‘æ”¾åˆ°è¿™é‡Œï¼ˆä¸åŸä»“åº“ä¸€è‡´ï¼‰
                                            // -------------------------------------------------------
                                            // ç®€åŒ–ï¼šå°è¯•ç›´æ¥è§£æ JSON
                                            String cleanedContent = content;
                                            if (content.contains("```json")) {
                                                java.util.regex.Pattern pattern = java.util.regex.Pattern.compile("```json\s*([\s\S]*?)```");
                                                java.util.regex.Matcher matcher = pattern.matcher(content);
                                                if (matcher.find()) {
                                                    cleanedContent = matcher.group(1);
                                                }
                                            } else if (content.contains("```")) {
                                                java.util.regex.Pattern pattern = java.util.regex.Pattern.compile("```\s*([\s\S]*?)```");
                                                java.util.regex.Matcher matcher = pattern.matcher(content);
                                                if (matcher.find()) {
                                                    cleanedContent = matcher.group(1);
                                                }
                                            }
                                            cleanedContent = cleanedContent.trim();
                                            int startIdx = cleanedContent.indexOf('{');
                                            int endIdx = cleanedContent.lastIndexOf('}');
                                            if (startIdx >= 0 && endIdx > startIdx) {
                                                cleanedContent = cleanedContent.substring(startIdx, endIdx + 1);
                                            }
                                
                                            com.google.gson.JsonObject json = JsonParser.parseString(cleanedContent).getAsJsonObject();
                                
                                            String[] codeFields = {"pickup_code", "pickupCode", "code", "å–é¤ç ", "å–é¤å·", "number"};
                                            String[] merchantFields = {"merchant_name", "merchantName", "merchant", "å•†å®¶", "å•†å®¶åç§°", "åº—é“ºåç§°", "store"};
                                
                                            for (String field : codeFields) {
                                                if (json.has(field) && !json.get(field).isJsonNull()) {
                                                    result.pickupCode = json.get(field).getAsString();
                                                    break;
                                                }
                                            }
                                            for (String field : merchantFields) {
                                                if (json.has(field) && !json.get(field).isJsonNull()) {
                                                    result.merchantName = json.get(field).getAsString();
                                                    break;
                                                }
                                            }
                                            updateStatus("âœ… JSONè§£ææˆåŠŸ");
                                
                                        } catch (Exception e) {
                                            updateStatus("âš ï¸ JSONè§£æå¤±è´¥ï¼Œå°è¯•æ­£åˆ™...");
                                            result = extractWithRegex(content);
                                        }
                                        return result;
                                    }
                                
                                    private RecognitionResult extractWithRegex(String content) {
                                        RecognitionResult result = new RecognitionResult();
                                        result.pickupCode = "æœªè¯†åˆ«";
                                        result.merchantName = "æœªçŸ¥å•†å®¶";
                                        try {
                                            java.util.regex.Pattern codePattern = java.util.regex.Pattern.compile(
                                                    "(?:pickup_code|pickupCode|code|å–é¤ç |å–é¤å·)[\"']?\s*[:ï¼š]\s*[\"']?([A-Za-z0-9\-]+)[\"']?",
                                                    java.util.regex.Pattern.CASE_INSENSITIVE
                                            );
                                            java.util.regex.Matcher codeMatcher = codePattern.matcher(content);
                                            if (codeMatcher.find()) {
                                                result.pickupCode = codeMatcher.group(1);
                                                updateStatus("âœ… æ­£åˆ™æå–åˆ°å–é¤ç : " + result.pickupCode);
                                            }
                                
                                            java.util.regex.Pattern merchantPattern = java.util.regex.Pattern.compile(
                                                    "(?:merchant_name|merchantName|merchant|å•†å®¶|å•†å®¶åç§°|åº—é“º)[\"']?\s*[:ï¼š]\s*[\"']?([^\"',\}]+)[\"']?",
                                                    java.util.regex.Pattern.CASE_INSENSITIVE
                                            );
                                            java.util.regex.Matcher merchantMatcher = merchantPattern.matcher(content);
                                            if (merchantMatcher.find()) {
                                                result.merchantName = merchantMatcher.group(1).trim();
                                                updateStatus("âœ… æ­£åˆ™æå–åˆ°å•†å®¶åç§°: " + result.merchantName);
                                            }
                                
                                            if (result.pickupCode.equals("æœªè¯†åˆ«")) {
                                                java.util.regex.Pattern simpleCodePattern = java.util.regex.Pattern.compile("\b([A-Z0-9]{3,10})\b");
                                                java.util.regex.Matcher simpleCodeMatcher = simpleCodePattern.matcher(content.toUpperCase());
                                                if (simpleCodeMatcher.find()) {
                                                    result.pickupCode = simpleCodeMatcher.group(1);
                                                    updateStatus("âœ… æ¨¡å¼åŒ¹é…åˆ°å¯èƒ½çš„å–é¤ç : " + result.pickupCode);
                                                }
                                            }
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Regex extraction error", e);
                                            updateStatus("âŒ æ­£åˆ™æå–å¤±è´¥: " + e.getMessage());
                                        }
                                        return result;
                                    }
                                
                                    private void sendFocusNotification(RecognitionResult result) {
                                        try {
                                            FocusNotificationHelper.sendFocusNotification(
                                                    context,
                                                    result.pickupCode,
                                                    result.merchantName
                                            );
                                        } catch (Exception e) {
                                            Log.e(TAG, "Send notification error", e);
                                        }
                                    }
                                
                                    private void updateStatus(String status) {
                                        if (statusCallback != null) {
                                            statusCallback.onStatusUpdate(status);
                                        }
                                        LogManager.getInstance().addLog(status);
                                    }
                                
                                    public static class RecognitionResult {
                                        public String pickupCode;
                                        public String merchantName;
                                    }

                            PickupCodeTileService.java
                                package com.test.hypernotification;
                                
                                import android.content.Intent;
                                import android.content.SharedPreferences;
                                import android.os.Handler;
                                import android.service.quicksettings.Tile;
                                import android.service.quicksettings.TileService;
                                import android.util.Log;
                                
                                public class PickupCodeTileService extends TileService {
                                
                                    private static final String TAG = "PickupCodeTile";
                                    private static final String PREF_TILE_DELAY = "tile_click_delay";
                                    private static final int DEFAULT_DELAY = 1000;
                                
                                    @Override
                                    public void onClick() {
                                        super.onClick();
                                
                                        SharedPreferences prefs = getSharedPreferences("config", MODE_PRIVATE);
                                        int delay = prefs.getInt(PREF_TILE_DELAY, DEFAULT_DELAY);
                                
                                        new Handler().postDelayed(() -> {
                                            try {
                                                if (isLocked()) {
                                                    unlockAndRun(() -> {
                                                        openQuickRun();
                                                        collapseNotificationPanel();
                                                    });
                                                } else {
                                                    openQuickRun();
                                                    collapseNotificationPanel();
                                                }
                                            } catch (Exception e) {
                                                Log.e(TAG, "ç£è´´è¯†åˆ«å¼‚å¸¸", e);
                                                LogManager.getInstance().addLog("[ç£è´´] å¼‚å¸¸: " + e.getMessage());
                                            }
                                        }, delay);
                                    }
                                
                                    /** å¯åŠ¨å¿«é€Ÿè¯†åˆ«æœåŠ¡ï¼ˆæ›¿æ¢å·²åˆ é™¤çš„QuickRunActivityï¼‰ */
                                    private void openQuickRun() {
                                        try {
                                            Intent serviceIntent = new Intent(this, QuickRunService.class);
                                            serviceIntent.setAction("com.test.hypernotification.QUICK_RUN");
                                            if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.O) {
                                                startForegroundService(serviceIntent);
                                            } else {
                                                startService(serviceIntent);
                                            }
                                            LogManager.getInstance().addLog("[ç£è´´] å·²å¯åŠ¨å¿«é€Ÿè¯†åˆ«æœåŠ¡");
                                        } catch (Exception e) {
                                            Log.e(TAG, "å¯åŠ¨ QuickRunService å¤±è´¥", e);
                                            LogManager.getInstance().addLog("[ç£è´´] QuickRunService å¯åŠ¨å¤±è´¥: " + e.getMessage());
                                        }
                                    }
                                
                                    /** è‡ªåŠ¨æ”¶èµ·é€šçŸ¥æ ï¼ˆéšè— APIï¼‰ */
                                    @SuppressWarnings({"PrivateApi", "WrongConstant"})
                                    private void collapseNotificationPanel() {
                                        try {
                                            Object sbservice = getSystemService("statusbar");
                                            Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
                                            statusbarManager.getMethod("collapsePanels").invoke(sbservice);
                                        } catch (Exception ignored) {}
                                    }
                                
                                    @Override
                                    public void onStartListening() {
                                        super.onStartListening();
                                        Tile tile = getQsTile();
                                        if (tile != null) {
                                            tile.setState(Tile.STATE_INACTIVE);
                                            tile.setLabel("å–é¤ç è¯†åˆ«");
                                            tile.setContentDescription("ç‚¹å‡»è¯†åˆ«å–é¤ç ");
                                            tile.updateTile();
                                        }
                                    }
                                
                                    @Override
                                    public void onTileAdded() {
                                        super.onTileAdded();
                                        Tile tile = getQsTile();
                                        if (tile != null) {
                                            tile.setState(Tile.STATE_INACTIVE);
                                            tile.setLabel("å–é¤ç è¯†åˆ«");
                                            tile.setContentDescription("ç‚¹å‡»è¯†åˆ«å–é¤ç ");
                                            tile.updateTile();
                                        }
                                    }
                                }

                            QuickRunService.java
                                package com.test.hypernotification;
                                
                                import android.app.Service;
                                import android.content.Intent;
                                import android.os.Build;
                                import android.os.IBinder;
                                import androidx.annotation.Nullable;
                                import android.util.Log;
                                
                                public class QuickRunService extends Service {
                                
                                    @Override
                                    public int onStartCommand(Intent intent, int flags, int startId) {
                                
                                        if (intent != null && "com.test.hypernotification.QUICK_RUN".equals(intent.getAction())) {
                                            LogManager.getInstance().addLog("[QuickRun] å¤–éƒ¨è°ƒç”¨è§¦å‘è¯†åˆ«");
                                
                                            // å¯åŠ¨è¯†åˆ«å‰å°æœåŠ¡
                                            Intent sIntent = new Intent(this, RecognitionService.class);
                                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                                startForegroundService(sIntent);
                                            } else {
                                                startService(sIntent);
                                            }
                                        }
                                
                                        // ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œä¸éœ€è¦å¸¸é©»
                                        stopSelf();
                                        return START_NOT_STICKY;
                                    }
                                
                                    @Nullable
                                    @Override
                                    public IBinder onBind(Intent intent) {
                                        return null;
                                    }

                            RecognitionService.java
                                package com.test.hypernotification;
                                
                                import android.app.Notification;
                                import android.app.NotificationChannel;
                                import android.app.NotificationManager;
                                import android.app.Service;
                                import android.content.Intent;
                                import android.os.Build;
                                import android.os.IBinder;
                                import android.util.Log;
                                
                                import androidx.annotation.Nullable;
                                
                                public class RecognitionService extends Service {
                                
                                    private static final String TAG = "RecognitionService";
                                    private static final String CHANNEL_ID = "recognition_foreground_channel";
                                    private static final int NOTIFICATION_ID = 2001;
                                
                                    @Override
                                    public void onCreate() {
                                        super.onCreate();
                                        createNotificationChannel();
                                        Log.d(TAG, "RecognitionService created");
                                    }
                                
                                    @Override
                                    public int onStartCommand(Intent intent, int flags, int startId) {
                                
                                        // å‰å°æœåŠ¡ â€” é˜²æ­¢åå°ç½‘ç»œè¢« MIUI/HyperOS é™åˆ¶
                                        startForeground(NOTIFICATION_ID, buildNotification());
                                
                                        try {
                                            PickupCodeService pickup = new PickupCodeService(this);
                                
                                            pickup.setStatusCallback(status ->
                                                    LogManager.getInstance().addLog("[RecognitionService] " + status)
                                            );
                                
                                            pickup.startRecognition(new PickupCodeService.RecognitionListener() {
                                                @Override
                                                public void onFinished() {
                                                    Log.d(TAG, "Recognition finished, stopping service.");
                                                    stopForeground(true);
                                                    stopSelf();
                                                }
                                            });
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Start recognition failed", e);
                                            stopForeground(true);
                                            stopSelf();
                                        }
                                
                                        return START_NOT_STICKY;
                                    }
                                
                                    @Nullable
                                    @Override
                                    public IBinder onBind(Intent intent) { return null; }
                                
                                    private Notification buildNotification() {
                                        Notification.Builder builder =
                                                (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
                                                        ? new Notification.Builder(this, CHANNEL_ID)
                                                        : new Notification.Builder(this);
                                
                                        return builder.setContentTitle("å–é¤ç è¯†åˆ«")
                                                .setContentText("æ­£åœ¨è¯†åˆ«ä¸­ï¼ˆå‰å°æœåŠ¡ï¼‰...")
                                                .setSmallIcon(android.R.drawable.ic_dialog_info)
                                                .setOngoing(true)
                                                .setShowWhen(true)
                                                .build();
                                    }
                                
                                    private void createNotificationChannel() {
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                            NotificationManager manager = getSystemService(NotificationManager.class);
                                            if (manager != null && manager.getNotificationChannel(CHANNEL_ID) == null) {
                                                NotificationChannel channel = new NotificationChannel(
                                                        CHANNEL_ID,
                                                        "è¯†åˆ«å‰å°æœåŠ¡",
                                                        NotificationManager.IMPORTANCE_LOW
                                                );
                                                channel.setDescription("ä¿æŒè¯†åˆ«ä»»åŠ¡åœ¨å‰å°è¿è¡Œï¼Œé˜²æ­¢ç½‘ç»œè¢«ç³»ç»Ÿé™åˆ¶");
                                                manager.createNotificationChannel(channel);
                                            }
                                        }
                                    }
                                
                                    @Override
                                    public void onDestroy() {
                                        super.onDestroy();
                                        Log.d(TAG, "RecognitionService destroyed");
                                    }

                            RootScreenshotHelper.java
                                package com.test.hypernotification;
                                
                                import android.content.Context;
                                import android.os.Environment;
                                import android.util.Log;
                                
                                import java.io.BufferedReader;
                                import java.io.File;
                                import java.io.InputStreamReader;
                                
                                public class RootScreenshotHelper {
                                    private static final String TAG = "RootScreenshotHelper";
                                
                                    public static boolean takeScreenshot(Context context) {
                                        try {
                                            // ä½¿ç”¨åº”ç”¨çš„å¤–éƒ¨å­˜å‚¨ç›®å½•
                                            File dir = context.getExternalFilesDir(Environment.DIRECTORY_PICTURES);
                                            if (dir != null && !dir.exists()) {
                                                dir.mkdirs();
                                            }
                                
                                            File screenshotFile = new File(dir, "pickup_screen.png");
                                
                                            // ä½¿ç”¨ screencap å‘½ä»¤æˆªå›¾
                                            String command = "su -c screencap -p " + screenshotFile.getAbsolutePath();
                                
                                            Process process = Runtime.getRuntime().exec(command);
                                
                                            // è¯»å–è¾“å‡º
                                            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
                                            BufferedReader errorReader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
                                
                                            String line;
                                            StringBuilder output = new StringBuilder();
                                            while ((line = reader.readLine()) != null) {
                                                output.append(line).append("
");
                                            }
                                
                                            StringBuilder errorOutput = new StringBuilder();
                                            while ((line = errorReader.readLine()) != null) {
                                                errorOutput.append(line).append("
");
                                            }
                                
                                            int exitCode = process.waitFor();
                                
                                            if (exitCode == 0 && screenshotFile.exists()) {
                                                Log.d(TAG, "Root screenshot saved: " + screenshotFile.getAbsolutePath());
                                                // ä¿å­˜åˆ°é™æ€å˜é‡ä»¥ä¾¿åç»­ä½¿ç”¨
                                                ScreenCaptureService.setLastScreenshot(screenshotFile);
                                                return true;
                                            } else {
                                                Log.e(TAG, "Root screenshot failed. Exit code: " + exitCode);
                                                if (errorOutput.length() > 0) {
                                                    Log.e(TAG, "Error output: " + errorOutput.toString());
                                                }
                                                return false;
                                            }
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Root screenshot error", e);
                                            return false;
                                        }
                                    }
                                
                                    public static boolean isRootAvailable() {
                                        try {
                                            Process process = Runtime.getRuntime().exec("su -c id");
                                            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
                                            String output = reader.readLine();
                                            reader.close();
                                
                                            int exitCode = process.waitFor();
                                            return exitCode == 0 && output != null && output.contains("uid=0");
                                        } catch (Exception e) {
                                            Log.e(TAG, "Root check failed", e);
                                            return false;
                                        }
                                    }

                            ScreenCaptureService.java
                                package com.test.hypernotification;
                                
                                import android.app.Notification;
                                import android.app.NotificationChannel;
                                import android.app.NotificationManager;
                                import android.app.Service;
                                import android.content.Context;
                                import android.content.Intent;
                                import android.graphics.Bitmap;
                                import android.graphics.PixelFormat;
                                import android.hardware.display.DisplayManager;
                                import android.hardware.display.VirtualDisplay;
                                import android.media.Image;
                                import android.media.ImageReader;
                                import android.media.projection.MediaProjection;
                                import android.media.projection.MediaProjectionManager;
                                import android.os.Build;
                                import android.os.Environment;
                                import android.os.Handler;
                                import android.os.IBinder;
                                import android.util.DisplayMetrics;
                                import android.util.Log;
                                import android.view.WindowManager;
                                
                                import java.io.File;
                                import java.io.FileOutputStream;
                                import java.nio.ByteBuffer;
                                
                                public class ScreenCaptureService extends Service {
                                    private static final String TAG = "ScreenCaptureService";
                                    private static final String CHANNEL_ID = "screen_capture_channel";
                                    private static final int NOTIFICATION_ID = 1001;
                                
                                    private MediaProjection mediaProjection;
                                    private VirtualDisplay virtualDisplay;
                                    private ImageReader imageReader;
                                    private static File lastScreenshot;
                                
                                    private int resultCode;
                                    private Intent resultData;
                                
                                    @Override
                                    public IBinder onBind(Intent intent) {
                                        return null;
                                    }
                                
                                    @Override
                                    public int onStartCommand(Intent intent, int flags, int startId) {
                                        if (intent != null) {
                                            resultCode = intent.getIntExtra("resultCode", -1);
                                            resultData = intent.getParcelableExtra("data");
                                
                                            startForeground(NOTIFICATION_ID, createNotification());
                                            captureScreen();
                                        }
                                        return START_NOT_STICKY;
                                    }
                                
                                    private Notification createNotification() {
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                            NotificationChannel channel = new NotificationChannel(
                                                CHANNEL_ID,
                                                "å±å¹•æˆªå›¾æœåŠ¡",
                                                NotificationManager.IMPORTANCE_LOW
                                            );
                                            NotificationManager manager = getSystemService(NotificationManager.class);
                                            manager.createNotificationChannel(channel);
                                        }
                                
                                        Notification.Builder builder;
                                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                                            builder = new Notification.Builder(this, CHANNEL_ID);
                                        } else {
                                            builder = new Notification.Builder(this);
                                        }
                                
                                        return builder.setContentTitle("æˆªå›¾æœåŠ¡")
                                                     .setContentText("æ­£åœ¨æˆªå–å±å¹•...")
                                                     .setSmallIcon(android.R.drawable.ic_menu_camera)
                                                     .build();
                                    }
                                
                                    private void captureScreen() {
                                        try {
                                            MediaProjectionManager projectionManager = (MediaProjectionManager)
                                                getSystemService(Context.MEDIA_PROJECTION_SERVICE);
                                
                                            mediaProjection = projectionManager.getMediaProjection(resultCode, resultData);
                                
                                            if (mediaProjection == null) {
                                                Log.e(TAG, "MediaProjection is null");
                                                stopSelf();
                                                return;
                                            }
                                
                                            WindowManager windowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
                                            DisplayMetrics metrics = new DisplayMetrics();
                                            windowManager.getDefaultDisplay().getMetrics(metrics);
                                
                                            int width = metrics.widthPixels;
                                            int height = metrics.heightPixels;
                                            int density = metrics.densityDpi;
                                
                                            imageReader = ImageReader.newInstance(width, height, PixelFormat.RGBA_8888, 1);
                                
                                            virtualDisplay = mediaProjection.createVirtualDisplay(
                                                "ScreenCapture",
                                                width, height, density,
                                                DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,
                                                imageReader.getSurface(), null, null
                                            );
                                
                                            imageReader.setOnImageAvailableListener(reader -> {
                                                Image image = null;
                                                FileOutputStream fos = null;
                                                try {
                                                    image = reader.acquireLatestImage();
                                                    if (image != null) {
                                                        Image.Plane[] planes = image.getPlanes();
                                                        ByteBuffer buffer = planes[0].getBuffer();
                                
                                                        int pixelStride = planes[0].getPixelStride();
                                                        int rowStride = planes[0].getRowStride();
                                                        int rowPadding = rowStride - pixelStride * width;
                                
                                                        Bitmap bitmap = Bitmap.createBitmap(
                                                            width + rowPadding / pixelStride, height,
                                                            Bitmap.Config.ARGB_8888
                                                        );
                                                        bitmap.copyPixelsFromBuffer(buffer);
                                
                                                        // ä¿å­˜æˆªå›¾
                                                        File dir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
                                                        if (dir != null && !dir.exists()) {
                                                            dir.mkdirs();
                                                        }
                                
                                                        lastScreenshot = new File(dir, "pickup_screen.png");
                                                        fos = new FileOutputStream(lastScreenshot);
                                                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
                                
                                                        Log.d(TAG, "Screenshot saved: " + lastScreenshot.getAbsolutePath());
                                                    }
                                                } catch (Exception e) {
                                                    Log.e(TAG, "Capture error", e);
                                                } finally {
                                                    if (fos != null) {
                                                        try {
                                                            fos.close();
                                                        } catch (Exception e) {
                                                            e.printStackTrace();
                                                        }
                                                    }
                                                    if (image != null) {
                                                        image.close();
                                                    }
                                                }
                                
                                                // åœæ­¢æœåŠ¡
                                                stopCapture();
                                                stopSelf();
                                            }, new Handler(getMainLooper()));
                                
                                        } catch (Exception e) {
                                            Log.e(TAG, "Setup capture error", e);
                                            stopSelf();
                                        }
                                    }
                                
                                    private void stopCapture() {
                                        if (virtualDisplay != null) {
                                            virtualDisplay.release();
                                            virtualDisplay = null;
                                        }
                                
                                        if (mediaProjection != null) {
                                            mediaProjection.stop();
                                            mediaProjection = null;
                                        }
                                
                                        if (imageReader != null) {
                                            imageReader.close();
                                            imageReader = null;
                                        }
                                    }
                                
                                    @Override
                                    public void onDestroy() {
                                        super.onDestroy();
                                        stopCapture();
                                    }
                                
                                    public static File getLastScreenshot() {
                                        return lastScreenshot;
                                    }
                                
                                    public static void setLastScreenshot(File screenshot) {
                                        lastScreenshot = screenshot;
                                    }

                            SettingsFragment.java
                                package com.test.hypernotification;
                                
                                import android.content.Context;
                                import android.content.SharedPreferences;
                                import android.os.Bundle;
                                import android.text.TextUtils;
                                import android.view.LayoutInflater;
                                import android.view.View;
                                import android.view.ViewGroup;
                                import android.widget.Button;
                                import android.widget.SeekBar;
                                import android.widget.Toast;
                                
                                import androidx.annotation.NonNull;
                                import androidx.annotation.Nullable;
                                import androidx.fragment.app.Fragment;
                                
                                import com.google.android.material.switchmaterial.SwitchMaterial;
                                import com.google.android.material.textfield.TextInputEditText;
                                
                                public class SettingsFragment extends Fragment {
                                
                                    private TextInputEditText etToken;
                                    private TextInputEditText etPicgoKey;
                                    private TextInputEditText etPicgoUrl;
                                    private TextInputEditText etAlbumId;
                                    private TextInputEditText etTileDelay; // æ·»åŠ è¿™ä¸ªå˜é‡
                                    private SwitchMaterial switchRootMode;
                                    private Button btnSave;
                                    private SeekBar seekTileDelay; // æ·»åŠ è¿™ä¸ªå˜é‡
                                
                                    private SharedPreferences prefs;
                                
                                    @Nullable
                                    @Override
                                    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
                                        View view = inflater.inflate(R.layout.fragment_settings, container, false);
                                
                                        initViews(view);
                                        loadPreferences();
                                
                                        return view;
                                    }
                                
                                    private void initViews(View view) {
                                        etToken = view.findViewById(R.id.et_token);
                                        etPicgoKey = view.findViewById(R.id.et_picgo_key);
                                        etPicgoUrl = view.findViewById(R.id.et_picgo_url);
                                        etAlbumId = view.findViewById(R.id.et_album_id);
                                        switchRootMode = view.findViewById(R.id.switch_root_mode);
                                        btnSave = view.findViewById(R.id.btn_save);
                                        
                                        // åˆå§‹åŒ–ç£è´´å»¶è¿Ÿç›¸å…³çš„è§†å›¾
                                        seekTileDelay = view.findViewById(R.id.seek_tile_delay);
                                        etTileDelay = view.findViewById(R.id.et_tile_delay);
                                
                                        prefs = requireContext().getSharedPreferences("config", Context.MODE_PRIVATE);
                                
                                        // è®¾ç½®é»˜è®¤å€¼
                                        etPicgoUrl.setText("https://www.picgo.net/api/1/upload");
                                
                                        // åŠ è½½ root æ¨¡å¼è®¾ç½®
                                        switchRootMode.setChecked(prefs.getBoolean("use_root_mode", false));
                                
                                        // æ£€æŸ¥ root æƒé™
                                        if (switchRootMode.isChecked()) {
                                            checkRootAccess();
                                        }
                                
                                        switchRootMode.setOnCheckedChangeListener((buttonView, isChecked) -> {
                                            if (isChecked) {
                                                if (RootScreenshotHelper.isRootAvailable()) {
                                                    prefs.edit().putBoolean("use_root_mode", true).apply();
                                                    Toast.makeText(getContext(), "å·²å¯ç”¨ Root æ¨¡å¼æˆªå›¾", Toast.LENGTH_SHORT).show();
                                                } else {
                                                    switchRootMode.setChecked(false);
                                                    Toast.makeText(getContext(), "Root æƒé™ä¸å¯ç”¨", Toast.LENGTH_SHORT).show();
                                                    prefs.edit().putBoolean("use_root_mode", false).apply();
                                                }
                                            } else {
                                                prefs.edit().putBoolean("use_root_mode", false).apply();
                                                Toast.makeText(getContext(), "å·²åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼æˆªå›¾", Toast.LENGTH_SHORT).show();
                                            }
                                        });
                                
                                        btnSave.setOnClickListener(v -> saveConfiguration());
                                        
                                        // åŠ è½½ç£è´´å»¶è¿Ÿè®¾ç½®
                                        int tileDelay = prefs.getInt("tile_click_delay", 1000);
                                        seekTileDelay.setProgress(tileDelay);
                                        etTileDelay.setText(String.valueOf(tileDelay));
                                        
                                        // æ»‘å—ç›‘å¬
                                        seekTileDelay.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
                                            @Override
                                            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
                                                if (fromUser) {
                                                    etTileDelay.setText(String.valueOf(progress));
                                                }
                                            }
                                        
                                            @Override
                                            public void onStartTrackingTouch(SeekBar seekBar) {}
                                        
                                            @Override
                                            public void onStopTrackingTouch(SeekBar seekBar) {}
                                        });
                                        
                                        // è¾“å…¥æ¡†ç›‘å¬
                                        etTileDelay.setOnFocusChangeListener((v, hasFocus) -> {
                                            if (!hasFocus) {
                                                try {
                                                    int delay = Integer.parseInt(etTileDelay.getText().toString());
                                                    delay = Math.max(0, Math.min(5000, delay));
                                                    seekTileDelay.setProgress(delay);
                                                    etTileDelay.setText(String.valueOf(delay));
                                                } catch (NumberFormatException e) {
                                                    // è¾“å…¥æ— æ•ˆæ—¶æ¢å¤æ»‘å—å€¼
                                                    etTileDelay.setText(String.valueOf(seekTileDelay.getProgress()));
                                                }
                                            }
                                        });
                                    }
                                
                                    private void loadPreferences() {
                                        etToken.setText(prefs.getString("token", ""));
                                        etPicgoKey.setText(prefs.getString("picgo_key", ""));
                                        etPicgoUrl.setText(prefs.getString("picgo_url", "https://www.picgo.net/api/1/upload"));
                                        etAlbumId.setText(prefs.getString("album_id", ""));
                                        
                                        // åŠ è½½ç£è´´å»¶è¿Ÿè®¾ç½®
                                        int tileDelay = prefs.getInt("tile_click_delay", 1000);
                                        if (seekTileDelay != null) {
                                            seekTileDelay.setProgress(tileDelay);
                                        }
                                        if (etTileDelay != null) {
                                            etTileDelay.setText(String.valueOf(tileDelay));
                                        }
                                    }
                                
                                    private void saveConfiguration() {
                                        String token = etToken.getText().toString().trim();
                                        String picgoKey = etPicgoKey.getText().toString().trim();
                                        String picgoUrl = etPicgoUrl.getText().toString().trim();
                                        String albumId = etAlbumId.getText().toString().trim();
                                
                                        if (TextUtils.isEmpty(token) || TextUtils.isEmpty(picgoKey) ||
                                            TextUtils.isEmpty(picgoUrl) || TextUtils.isEmpty(albumId)) {
                                            Toast.makeText(getContext(), "è¯·å¡«å†™æ‰€æœ‰é…ç½®é¡¹", Toast.LENGTH_SHORT).show();
                                            return;
                                        }
                                
                                        SharedPreferences.Editor editor = prefs.edit();
                                        editor.putString("token", token);
                                        editor.putString("picgo_key", picgoKey);
                                        editor.putString("picgo_url", picgoUrl);
                                        editor.putString("album_id", albumId);
                                        
                                        // ä¿å­˜ç£è´´å»¶è¿Ÿè®¾ç½®
                                        try {
                                            int tileDelay = Integer.parseInt(etTileDelay.getText().toString());
                                            tileDelay = Math.max(0, Math.min(5000, tileDelay));
                                            editor.putInt("tile_click_delay", tileDelay);
                                        } catch (NumberFormatException e) {
                                            Toast.makeText(getContext(), "ç£è´´å»¶è¿Ÿæ ¼å¼é”™è¯¯", Toast.LENGTH_SHORT).show();
                                            return;
                                        }
                                        
                                        editor.apply();
                                
                                        Toast.makeText(getContext(), "é…ç½®å·²ä¿å­˜", Toast.LENGTH_SHORT).show();
                                    }
                                
                                    private void checkRootAccess() {
                                        if (!RootScreenshotHelper.isRootAvailable()) {
                                            switchRootMode.setChecked(false);
                                            prefs.edit().putBoolean("use_root_mode", false).apply();
                                            Toast.makeText(getContext(), "Root æƒé™ä¸å¯ç”¨ï¼Œå·²åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼", Toast.LENGTH_SHORT).show();
                                        }
                                    }

                            StatusFragment.java
                                package com.test.hypernotification;
                                
                                import android.content.Intent;
                                import android.os.Bundle;
                                import android.view.LayoutInflater;
                                import android.view.View;
                                import android.view.ViewGroup;
                                import android.widget.Button;
                                import android.widget.TextView;
                                
                                import androidx.annotation.NonNull;
                                import androidx.annotation.Nullable;
                                import androidx.core.widget.NestedScrollView;
                                import androidx.fragment.app.Fragment;
                                
                                import java.text.SimpleDateFormat;
                                import java.util.Date;
                                import java.util.Locale;
                                
                                public class StatusFragment extends Fragment implements PickupCodeService.StatusCallback {
                                
                                    private TextView tvStatusText;
                                    private TextView tvLog;
                                    private NestedScrollView scrollView;
                                    private Button btnViewFullLog;
                                    private Button btnClearLog;
                                
                                    private static StatusFragment instance;
                                
                                    public static StatusFragment getInstance() {
                                        return instance;
                                    }
                                
                                    @Nullable
                                    @Override
                                    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
                                        View view = inflater.inflate(R.layout.fragment_status, container, false);
                                
                                        instance = this;
                                
                                        initViews(view);
                                        loadLogs();
                                
                                        return view;
                                    }
                                
                                    private void initViews(View view) {
                                        tvStatusText = view.findViewById(R.id.tv_status_text);
                                        tvLog = view.findViewById(R.id.tv_log);
                                        scrollView = view.findViewById(R.id.scroll_view);
                                        btnViewFullLog = view.findViewById(R.id.btn_view_full_log);
                                        btnClearLog = view.findViewById(R.id.btn_clear_log);
                                
                                        btnViewFullLog.setOnClickListener(v -> {
                                            Intent intent = new Intent(getContext(), LogActivity.class);
                                            startActivity(intent);
                                        });
                                
                                        btnClearLog.setOnClickListener(v -> {
                                            LogManager.getInstance().clearLogs();
                                            tvLog.setText("");
                                            updateStatusText("æ—¥å¿—å·²æ¸…ç©º");
                                        });
                                    }
                                
                                    private void loadLogs() {
                                        String logs = LogManager.getInstance().getAllLogs();
                                        if (!logs.isEmpty()) {
                                            tvLog.setText(logs);
                                            scrollView.post(() -> scrollView.fullScroll(View.FOCUS_DOWN));
                                        }
                                    }
                                
                                    @Override
                                    public void onStatusUpdate(String status) {
                                        if (getActivity() != null) {
                                            getActivity().runOnUiThread(() -> {
                                                // æ›´æ–°çŠ¶æ€æ–‡æœ¬
                                                updateStatusText(status);
                                
                                                // æ·»åŠ åˆ°æ—¥å¿—
                                                String timestamp = new SimpleDateFormat("HH:mm:ss", Locale.getDefault())
                                                    .format(new Date());
                                                String message = String.format("[%s] %s
", timestamp, status);
                                                tvLog.append(message);
                                
                                                // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
                                                scrollView.post(() -> scrollView.fullScroll(View.FOCUS_DOWN));
                                
                                                // ä¿å­˜æ—¥å¿—
                                                LogManager.getInstance().addLog(message);
                                            });
                                        }
                                    }
                                
                                    private void updateStatusText(String status) {
                                        // æå–ç®€çŸ­çš„çŠ¶æ€æè¿°
                                        if (status.contains("å¼€å§‹")) {
                                            tvStatusText.setText("è¿è¡Œä¸­...");
                                        } else if (status.contains("æˆåŠŸ")) {
                                            tvStatusText.setText("æ‰§è¡ŒæˆåŠŸ");
                                        } else if (status.contains("å¤±è´¥") || status.contains("é”™è¯¯")) {
                                            tvStatusText.setText("æ‰§è¡Œå¤±è´¥");
                                        } else if (status.contains("å®Œæˆ")) {
                                            tvStatusText.setText("å·²å®Œæˆ");
                                        } else {
                                            tvStatusText.setText(status);
                                        }
                                    }
                                
                                    @Override
                                    public void onDestroy() {
                                        super.onDestroy();
                                        instance = null;
                                    }

                            TestFragment.java
                                package com.test.hypernotification;
                                
                                import android.app.Activity;
                                import android.content.Intent;
                                import android.content.SharedPreferences;
                                import android.net.Uri;
                                import android.os.Bundle;
                                import android.provider.OpenableColumns;
                                import android.text.TextUtils;
                                import android.view.LayoutInflater;
                                import android.view.View;
                                import android.view.ViewGroup;
                                import android.database.Cursor;
                                import android.widget.Button;
                                import android.widget.EditText;
                                import android.widget.ImageView;
                                import android.widget.ProgressBar;
                                import android.widget.Toast;
                                import java.io.IOException;
                                
                                import androidx.activity.result.ActivityResultLauncher;
                                import androidx.activity.result.contract.ActivityResultContracts;
                                import androidx.annotation.NonNull;
                                import androidx.annotation.Nullable;
                                import androidx.fragment.app.Fragment;
                                
                                import com.google.gson.JsonObject;
                                import com.google.gson.JsonParser;
                                
                                import java.io.InputStream;
                                import java.util.Objects;
                                
                                import okhttp3.Call;
                                import okhttp3.Callback;
                                import okhttp3.MediaType;
                                import okhttp3.MultipartBody;
                                import okhttp3.OkHttpClient;
                                import okhttp3.Request;
                                import okhttp3.RequestBody;
                                import okhttp3.Response;
                                import okio.Buffer;
                                
                                public class TestFragment extends Fragment {
                                
                                    private static final int REQ_PICK_IMAGE = 2001;
                                
                                    private EditText etMerchant, etPickupCode, etCustomJson;
                                    private Button btnPickImage, btnUploadAndSend;
                                    private ImageView ivPreview;
                                    private ProgressBar progressBar;
                                
                                    private Uri selectedImageUri;
                                    private SharedPreferences prefs;
                                    private OkHttpClient httpClient = new OkHttpClient();
                                
                                    private final ActivityResultLauncher<String> pickImageLauncher =
                                            registerForActivityResult(new ActivityResultContracts.GetContent(), uri -> {
                                                if (uri != null) {
                                                    selectedImageUri = uri;
                                                    ivPreview.setImageURI(uri);
                                                }
                                            });
                                
                                    public TestFragment() { }
                                
                                    @Nullable
                                    @Override
                                    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,
                                                             @Nullable Bundle savedInstanceState) {
                                        View v = inflater.inflate(R.layout.fragment_test, container, false);
                                        etMerchant = v.findViewById(R.id.et_merchant);
                                        etPickupCode = v.findViewById(R.id.et_pickup_code);
                                        etCustomJson = v.findViewById(R.id.et_custom_json);
                                        btnPickImage = v.findViewById(R.id.btn_pick_image);
                                        btnUploadAndSend = v.findViewById(R.id.btn_upload_and_send);
                                        ivPreview = v.findViewById(R.id.iv_preview);
                                        progressBar = v.findViewById(R.id.progress_bar);
                                
                                        prefs = requireActivity().getSharedPreferences("config", Activity.MODE_PRIVATE);
                                
                                        btnPickImage.setOnClickListener(v1 -> pickImageLauncher.launch("image/*"));
                                
                                        btnUploadAndSend.setOnClickListener(v1 -> {
                                            String merchant = etMerchant.getText().toString().trim();
                                            String code = etPickupCode.getText().toString().trim();
                                            String customJson = etCustomJson.getText().toString().trim();
                                
                                            if (TextUtils.isEmpty(merchant) || TextUtils.isEmpty(code)) {
                                                Toast.makeText(requireContext(), "è¯·å¡«å†™å•†å®¶å’Œå–é¤ç ", Toast.LENGTH_SHORT).show();
                                                return;
                                            }
                                
                                            JsonObject paramV2;
                                            if (!TextUtils.isEmpty(customJson)) {
                                                try {
                                                    paramV2 = JsonParser.parseString(customJson).getAsJsonObject();
                                                } catch (Exception e) {
                                                    Toast.makeText(requireContext(), "è‡ªå®šä¹‰ JSON æ ¼å¼é”™è¯¯", Toast.LENGTH_SHORT).show();
                                                    return;
                                                }
                                            } else {
                                                // ä½¿ç”¨ä¸ sendFocusNotification ç›¸åŒç»“æ„ä½†æ›¿æ¢å•†å®¶ä¸å–é¤ç 
                                                paramV2 = new JsonObject();
                                                paramV2.addProperty("protocol", 1);
                                                paramV2.addProperty("aodTitle", "å–é¤ç : " + code);
                                                paramV2.addProperty("business", "order_pending");
                                                paramV2.addProperty("ticker", "å–é¤æé†’");
                                                paramV2.addProperty("isShowNotification", true);
                                                paramV2.addProperty("enableFloat", true);
                                                paramV2.addProperty("timeout", 60);
                                                paramV2.addProperty("updatable", true);
                                
                                                JsonObject baseInfo = new JsonObject();
                                                baseInfo.addProperty("type", 1);
                                                baseInfo.addProperty("title", code);
                                                baseInfo.addProperty("content", "å–é¤ç ");
                                                paramV2.add("baseInfo", baseInfo);
                                
                                                JsonObject hintInfo = new JsonObject();
                                                hintInfo.addProperty("type", 1);
                                                hintInfo.addProperty("title", merchant);
                                                hintInfo.addProperty("content", "å•†å®¶");
                                                paramV2.add("hintInfo", hintInfo);
                                
                                                JsonObject paramIsland = new JsonObject();
                                                paramIsland.addProperty("islandProperty", 1);
                                                paramIsland.addProperty("islandTimeout", 900);
                                                paramIsland.addProperty("highlightColor", "#FFBB0F");
                                
                                                JsonObject bigIslandArea = new JsonObject();
                                                JsonObject imageTextInfoLeft = new JsonObject();
                                                JsonObject textInfoLeft = new JsonObject();
                                                textInfoLeft.addProperty("title", "å–é¤ç ");
                                                textInfoLeft.addProperty("showHighlightColor", true);
                                                imageTextInfoLeft.add("textInfo", textInfoLeft);
                                                imageTextInfoLeft.addProperty("type", 1);
                                                bigIslandArea.add("imageTextInfoLeft", imageTextInfoLeft);
                                
                                                JsonObject imageTextInfoRight = new JsonObject();
                                                JsonObject textInfoRight = new JsonObject();
                                                textInfoRight.addProperty("title", code);
                                                imageTextInfoRight.add("textInfo", textInfoRight);
                                                imageTextInfoRight.addProperty("type", 2);
                                                bigIslandArea.add("imageTextInfoRight", imageTextInfoRight);
                                
                                                paramIsland.add("bigIslandArea", bigIslandArea);
                                                paramV2.add("param_island", paramIsland);
                                            }
                                
                                            // å¦‚æœé€‰æ‹©äº†å›¾ç‰‡åˆ™å…ˆä¸Šä¼ 
                                            if (selectedImageUri != null) {
                                                uploadImageThenSend(selectedImageUri, paramV2);
                                            } else {
                                                // ç›´æ¥å‘é€é€šçŸ¥ï¼ˆä¸ä¸Šä¼ å›¾ç‰‡ï¼‰
                                                FocusNotificationHelper.sendFocusNotificationWithCustomParams(requireContext(), paramV2);
                                                Toast.makeText(requireContext(), "å·²å‘é€ç„¦ç‚¹é€šçŸ¥ï¼ˆæœªä¸Šä¼ å›¾ç‰‡ï¼‰", Toast.LENGTH_SHORT).show();
                                            }
                                        });
                                
                                        return v;
                                    }
                                
                                    private void uploadImageThenSend(Uri uri, JsonObject paramV2) {
                                        String picgoUrl = prefs.getString("picgo_url", "");
                                        String picgoKey = prefs.getString("picgo_key", "");
                                
                                        if (TextUtils.isEmpty(picgoUrl)) {
                                            Toast.makeText(requireContext(), "æœªé…ç½® PicGo ä¸Šä¼ åœ°å€ï¼Œè¯·åœ¨è®¾ç½®ä¸­å¡«å†™ picgo_url", Toast.LENGTH_LONG).show();
                                            return;
                                        }
                                
                                        progressBar.setVisibility(View.VISIBLE);
                                
                                        try {
                                            // è¯»å–æ–‡ä»¶å†…å®¹åˆ° bufferï¼ˆæ³¨æ„ï¼šæ­¤å¤„ç®€åŒ–ä¸ºä¸€æ¬¡æ€§è¯»å–ï¼Œé€‚ç”¨äºå°å›¾ç‰‡ï¼‰
                                            InputStream is = requireContext().getContentResolver().openInputStream(uri);
                                            Buffer buf = new Buffer();
                                            buf.readFrom(is);
                                            byte[] bytes = buf.readByteArray();
                                
                                            // æ„é€  multipart è¯·æ±‚ï¼ˆPicGo å¸¸è§æ¥å£ï¼‰
                                            RequestBody requestBody = new MultipartBody.Builder()
                                                    .setType(MultipartBody.FORM)
                                                    .addFormDataPart("file", "upload.jpg",
                                                            RequestBody.create(bytes, MediaType.parse("image/jpeg")))
                                                    .build();
                                
                                            Request.Builder reqBuilder = new Request.Builder()
                                                    .url(picgoUrl)
                                                    .post(requestBody);
                                
                                            if (!TextUtils.isEmpty(picgoKey)) {
                                                reqBuilder.addHeader("Authorization", picgoKey);
                                            }
                                
                                            Request request = reqBuilder.build();
                                            httpClient.newCall(request).enqueue(new Callback() {
                                                @Override
                                                public void onFailure(@NonNull Call call, @NonNull IOException e) {
                                                    requireActivity().runOnUiThread(() -> {
                                                        progressBar.setVisibility(View.GONE);
                                                        Toast.makeText(requireContext(), "å›¾ç‰‡ä¸Šä¼ å¤±è´¥: " + e.getMessage(), Toast.LENGTH_LONG).show();
                                                    });
                                                }
                                
                                                @Override
                                                public void onResponse(@NonNull Call call, @NonNull Response response) {
                                                    try {
                                                        String resp = response.body() != null ? response.body().string() : "";
                                                        // ç®€å•å°è¯•è§£æè¿”å›çš„ç›´é“¾ï¼ˆå› å„å›¾åºŠè¿”å›ä¸åŒï¼Œéœ€è¦æ ¹æ® PicGo é…ç½®è°ƒæ•´ï¼‰
                                                        // å°†å›¾ç‰‡ url æ”¾è¿› paramV2.hintInfo.contentï¼ˆä»…ç¤ºä¾‹ï¼‰
                                                        if (!resp.isEmpty()) {
                                                            // è¿™é‡Œç¤ºä¾‹ï¼šæŠŠè¿”å›æ–‡æœ¬æ”¾åˆ° hintInfo.extraImageResponse
                                                            JsonObject hintInfo = paramV2.has("hintInfo") ? paramV2.getAsJsonObject("hintInfo") : new JsonObject();
                                                            hintInfo.addProperty("uploadedImageResponse", resp);
                                                            paramV2.add("hintInfo", hintInfo);
                                                        }
                                
                                                        requireActivity().runOnUiThread(() -> {
                                                            progressBar.setVisibility(View.GONE);
                                                            FocusNotificationHelper.sendFocusNotificationWithCustomParams(requireContext(), paramV2);
                                                            Toast.makeText(requireContext(), "å›¾ç‰‡ä¸Šä¼ å¹¶å‘é€é€šçŸ¥å®Œæˆ", Toast.LENGTH_SHORT).show();
                                                        });
                                                    } catch (Exception e) {
                                                        requireActivity().runOnUiThread(() -> {
                                                            progressBar.setVisibility(View.GONE);
                                                            Toast.makeText(requireContext(), "è§£æä¸Šä¼ å“åº”å¤±è´¥", Toast.LENGTH_LONG).show();
                                                        });
                                                    }
                                                }
                                            });
                                
                                        } catch (Exception e) {
                                            progressBar.setVisibility(View.GONE);
                                            Toast.makeText(requireContext(), "è¯»å–å›¾ç‰‡å¤±è´¥: " + e.getMessage(), Toast.LENGTH_LONG).show();
                                        }
                                    }

            res
                drawable
                    ic_launcher.xml
                        <vector xmlns:android="http://schemas.android.com/apk/res/android"
                            android:width="108dp"
                            android:height="108dp"
                            android:viewportWidth="108"
                            android:viewportHeight="108">
                        
                            <group
                                android:scaleX="2.1"
                                android:scaleY="2.1"
                                android:translateX="22.68"
                                android:translateY="22.68">
                        
                                <path
                                    android:fillColor="#FF6200EE"
                                    android:pathData="M12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10,-4.48 10,-10S17.52,2 12,2zM13,17h-2v-6h2v6zM13,9h-2L11,7h2v2z"/>
                        
                            </group>

                layout
                    activity_log.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical"
                            android:padding="16dp">
                        
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="è¿è¡Œæ—¥å¿—"
                                android:textSize="20sp"
                                android:textStyle="bold"
                                android:layout_marginBottom="16dp" />
                        
                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="horizontal"
                                android:layout_marginBottom="16dp">
                        
                                <Button
                                    android:id="@+id/btn_refresh"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:text="åˆ·æ–°"
                                    android:layout_marginEnd="8dp" />
                        
                                <Button
                                    android:id="@+id/btn_clear"
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:text="æ¸…ç©º"
                                    android:layout_marginStart="8dp" />
                        
                            </LinearLayout>
                        
                            <ScrollView
                                android:layout_width="match_parent"
                                android:layout_height="0dp"
                                android:layout_weight="1"
                                android:background="@android:color/black"
                                android:padding="8dp">
                        
                                <TextView
                                    android:id="@+id/tv_logs"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:fontFamily="monospace"
                                    android:textColor="@android:color/white"
                                    android:textSize="11sp" />
                        
                            </ScrollView>
                        

                    activity_main.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:padding="16dp">
                        
                            <TextView
                                android:id="@+id/tv_title"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="å–é¤ç è¯†åˆ«"
                                android:textSize="24sp"
                                android:textStyle="bold"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toTopOf="parent" />
                        
                            <com.google.android.material.textfield.TextInputLayout
                                android:id="@+id/til_token"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="24dp"
                                android:hint="AI Token"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/tv_title">
                        
                                <com.google.android.material.textfield.TextInputEditText
                                    android:id="@+id/et_token"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:inputType="text" />
                        
                            </com.google.android.material.textfield.TextInputLayout>
                        
                            <com.google.android.material.textfield.TextInputLayout
                                android:id="@+id/til_picgo_key"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="16dp"
                                android:hint="PicGo API Key"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/til_token">
                        
                                <com.google.android.material.textfield.TextInputEditText
                                    android:id="@+id/et_picgo_key"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:inputType="text" />
                        
                            </com.google.android.material.textfield.TextInputLayout>
                        
                            <com.google.android.material.textfield.TextInputLayout
                                android:id="@+id/til_picgo_url"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="16dp"
                                android:hint="PicGo URL"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/til_picgo_key">
                        
                                <com.google.android.material.textfield.TextInputEditText
                                    android:id="@+id/et_picgo_url"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:inputType="textUri" />
                        
                            </com.google.android.material.textfield.TextInputLayout>
                        
                            <com.google.android.material.textfield.TextInputLayout
                                android:id="@+id/til_album_id"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="16dp"
                                android:hint="Album ID"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/til_picgo_url">
                        
                                <com.google.android.material.textfield.TextInputEditText
                                    android:id="@+id/et_album_id"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:inputType="text" />
                        
                            </com.google.android.material.textfield.TextInputLayout>
                        
                            <LinearLayout
                                android:id="@+id/ll_root_mode"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="16dp"
                                android:orientation="horizontal"
                                android:gravity="center_vertical"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/til_album_id">
                        
                                <TextView
                                    android:layout_width="0dp"
                                    android:layout_height="wrap_content"
                                    android:layout_weight="1"
                                    android:text="Root æ¨¡å¼æˆªå›¾"
                                    android:textSize="16sp" />
                        
                                <Switch
                                    android:id="@+id/switch_root_mode"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content" />
                        
                            </LinearLayout>
                        
                            <Button
                                android:id="@+id/btn_save"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="24dp"
                                android:text="ä¿å­˜é…ç½®"
                                app:layout_constraintEnd_toStartOf="@+id/btn_run"
                                app:layout_constraintHorizontal_bias="0.5"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/ll_root_mode" />
                        
                            <Button
                                android:id="@+id/btn_run"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginStart="8dp"
                                android:layout_marginTop="24dp"
                                android:text="è¿è¡Œè¯†åˆ«"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintHorizontal_bias="0.5"
                                app:layout_constraintStart_toEndOf="@+id/btn_save"
                                app:layout_constraintTop_toBottomOf="@+id/ll_root_mode" />
                        
                            <Button
                                android:id="@+id/btn_view_log"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="8dp"
                                android:text="æŸ¥çœ‹æ—¥å¿—"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/btn_save" />
                        
                            <TextView
                                android:id="@+id/tv_status_label"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="24dp"
                                android:text="è¿è¡ŒçŠ¶æ€ï¼š"
                                android:textStyle="bold"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/btn_view_log" />
                        
                            <ScrollView
                                android:id="@+id/scroll_view"
                                android:layout_width="0dp"
                                android:layout_height="0dp"
                                android:layout_marginTop="8dp"
                                android:background="@android:color/darker_gray"
                                android:padding="8dp"
                                app:layout_constraintBottom_toBottomOf="parent"
                                app:layout_constraintEnd_toEndOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/tv_status_label">
                        
                                <TextView
                                    android:id="@+id/tv_status"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:fontFamily="monospace"
                                    android:textColor="@android:color/white"
                                    android:textSize="12sp" />
                        
                            </ScrollView>
                        

                    activity_main_tabs.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent">
                        
                            <com.google.android.material.appbar.AppBarLayout
                                android:id="@+id/appbar"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">
                        
                                <androidx.appcompat.widget.Toolbar
                                    android:id="@+id/toolbar"
                                    android:layout_width="match_parent"
                                    android:layout_height="?attr/actionBarSize"
                                    app:title="å–é¤ç è¯†åˆ«"
                                    app:layout_scrollFlags="scroll|enterAlways" />
                        
                                <com.google.android.material.tabs.TabLayout
                                    android:id="@+id/tabs"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    app:tabMode="fixed"
                                    app:tabGravity="fill" />
                        
                            </com.google.android.material.appbar.AppBarLayout>
                        
                            <androidx.viewpager2.widget.ViewPager2
                                android:id="@+id/viewpager"
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                app:layout_behavior="@string/appbar_scrolling_view_behavior" />
                        
                            <com.google.android.material.floatingactionbutton.FloatingActionButton
                                android:id="@+id/fab_run"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_gravity="bottom|end"
                                android:layout_margin="16dp"
                                android:src="@android:drawable/ic_media_play"
                                app:backgroundTint="?attr/colorPrimary"
                                app:tint="@android:color/white" />
                        

                    fragment_settings.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:padding="16dp">
                        
                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical">
                        
                                <com.google.android.material.textfield.TextInputLayout
                                    android:id="@+id/til_token"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:hint="AI Token"
                                    app:endIconMode="password_toggle">
                        
                                    <com.google.android.material.textfield.TextInputEditText
                                        android:id="@+id/et_token"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:inputType="textPassword" />
                        
                                </com.google.android.material.textfield.TextInputLayout>
                        
                                <com.google.android.material.textfield.TextInputLayout
                                    android:id="@+id/til_picgo_key"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="16dp"
                                    android:hint="PicGo API Key"
                                    app:endIconMode="password_toggle">
                        
                                    <com.google.android.material.textfield.TextInputEditText
                                        android:id="@+id/et_picgo_key"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:inputType="textPassword" />
                        
                                </com.google.android.material.textfield.TextInputLayout>
                        
                                <com.google.android.material.textfield.TextInputLayout
                                    android:id="@+id/til_picgo_url"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="16dp"
                                    android:hint="PicGo URL">
                        
                                    <com.google.android.material.textfield.TextInputEditText
                                        android:id="@+id/et_picgo_url"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:inputType="textUri" />
                        
                                </com.google.android.material.textfield.TextInputLayout>
                        
                                <com.google.android.material.textfield.TextInputLayout
                                    android:id="@+id/til_album_id"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="16dp"
                                    android:hint="Album ID">
                        
                                    <com.google.android.material.textfield.TextInputEditText
                                        android:id="@+id/et_album_id"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:inputType="text" />
                        
                                </com.google.android.material.textfield.TextInputLayout>
                        
                                <!-- ç£è´´å»¶è¿Ÿè®¾ç½® -->
                                <com.google.android.material.card.MaterialCardView
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="24dp"
                                    app:cardElevation="2dp"
                                    app:contentPadding="16dp">
                        
                                    <LinearLayout
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:orientation="vertical">
                        
                                        <TextView
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:text="ç£è´´è®¾ç½®"
                                            android:textSize="16sp"
                                            android:textStyle="bold" />
                        
                                        <TextView
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:layout_marginTop="8dp"
                                            android:text="ç£è´´ç‚¹å‡»å»¶è¿Ÿ"
                                            android:textSize="14sp" />
                        
                                        <LinearLayout
                                            android:layout_width="match_parent"
                                            android:layout_height="wrap_content"
                                            android:layout_marginTop="8dp"
                                            android:orientation="horizontal"
                                            android:gravity="center_vertical">
                        
                                            <SeekBar
                                                android:id="@+id/seek_tile_delay"
                                                android:layout_width="0dp"
                                                android:layout_height="wrap_content"
                                                android:layout_weight="1"
                                                android:max="5000"
                                                android:progress="1000" />
                        
                                            <com.google.android.material.textfield.TextInputLayout
                                                android:id="@+id/til_tile_delay"
                                                android:layout_width="80dp"
                                                android:layout_height="wrap_content"
                                                android:layout_marginStart="16dp"
                                                android:hint="ms">
                        
                                                <com.google.android.material.textfield.TextInputEditText
                                                    android:id="@+id/et_tile_delay"
                                                    android:layout_width="match_parent"
                                                    android:layout_height="wrap_content"
                                                    android:inputType="number"
                                                    android:maxLines="1"
                                                    android:text="1000" />
                        
                                            </com.google.android.material.textfield.TextInputLayout>
                        
                                        </LinearLayout>
                        
                                        <TextView
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:layout_marginTop="4dp"
                                            android:text="èŒƒå›´: 0-5000msï¼Œå»ºè®®1000ms"
                                            android:textColor="?android:attr/textColorSecondary"
                                            android:textSize="12sp" />
                        
                                    </LinearLayout>
                        
                                </com.google.android.material.card.MaterialCardView>
                        
                                <!-- æˆªå›¾æ¨¡å¼è®¾ç½® -->
                                <com.google.android.material.card.MaterialCardView
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="16dp"
                                    app:cardElevation="2dp"
                                    app:contentPadding="16dp">
                        
                                    <LinearLayout
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:orientation="vertical">
                        
                                        <TextView
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:text="æˆªå›¾æ¨¡å¼"
                                            android:textSize="16sp"
                                            android:textStyle="bold" />
                        
                                        <com.google.android.material.switchmaterial.SwitchMaterial
                                            android:id="@+id/switch_root_mode"
                                            android:layout_width="match_parent"
                                            android:layout_height="wrap_content"
                                            android:layout_marginTop="8dp"
                                            android:text="ä½¿ç”¨ Root æ¨¡å¼"
                                            android:textSize="14sp" />
                        
                                        <TextView
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:layout_marginTop="8dp"
                                            android:text="Rootæ¨¡å¼æ— éœ€æˆæƒæˆªå±æƒé™ï¼Œä½†éœ€è¦è®¾å¤‡å·²Root"
                                            android:textColor="?android:attr/textColorSecondary"
                                            android:textSize="12sp" />
                        
                                    </LinearLayout>
                        
                                </com.google.android.material.card.MaterialCardView>
                        
                                <Button
                                    android:id="@+id/btn_save"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="24dp"
                                    android:text="ä¿å­˜é…ç½®" />
                        
                            </LinearLayout>
                        

                    fragment_status.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            xmlns:app="http://schemas.android.com/apk/res-auto"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="vertical">
                        
                            <com.google.android.material.card.MaterialCardView
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_margin="16dp"
                                app:cardElevation="4dp">
                        
                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:orientation="vertical"
                                    android:padding="16dp">
                        
                                    <TextView
                                        android:id="@+id/tv_current_status"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:text="å½“å‰çŠ¶æ€"
                                        android:textSize="14sp"
                                        android:textColor="?android:attr/textColorSecondary" />
                        
                                    <TextView
                                        android:id="@+id/tv_status_text"
                                        android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:layout_marginTop="4dp"
                                        android:text="å°±ç»ª"
                                        android:textSize="18sp"
                                        android:textStyle="bold" />
                        
                                    <LinearLayout
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:layout_marginTop="16dp"
                                        android:orientation="horizontal">
                        
                                        <Button
                                            android:id="@+id/btn_view_full_log"
                                            style="@style/Widget.MaterialComponents.Button.TextButton"
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:text="æŸ¥çœ‹å®Œæ•´æ—¥å¿—" />
                        
                                        <Space
                                            android:layout_width="0dp"
                                            android:layout_height="wrap_content"
                                            android:layout_weight="1" />
                        
                                        <Button
                                            android:id="@+id/btn_clear_log"
                                            style="@style/Widget.MaterialComponents.Button.TextButton"
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:text="æ¸…ç©ºæ—¥å¿—"
                                            android:textColor="?android:attr/textColorSecondary" />
                        
                                    </LinearLayout>
                        
                                </LinearLayout>
                        
                            </com.google.android.material.card.MaterialCardView>
                        
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginStart="16dp"
                                android:layout_marginTop="8dp"
                                android:text="è¿è¡Œæ—¥å¿—"
                                android:textSize="14sp"
                                android:textStyle="bold" />
                        
                            <androidx.core.widget.NestedScrollView
                                android:id="@+id/scroll_view"
                                android:layout_width="match_parent"
                                android:layout_height="0dp"
                                android:layout_weight="1"
                                android:layout_margin="16dp"
                                android:background="@android:color/black"
                                android:padding="12dp">
                        
                                <TextView
                                    android:id="@+id/tv_log"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:fontFamily="monospace"
                                    android:textColor="#00FF00"
                                    android:textSize="12sp"
                                    android:lineSpacingExtra="2dp" />
                        
                            </androidx.core.widget.NestedScrollView>
                        

                    fragment_test.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:padding="12dp">
                        
                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical">
                        
                                <EditText
                                    android:id="@+id/et_merchant"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:hint="å•†å®¶ï¼ˆä¾‹å¦‚ï¼šéº¦å½“åŠ³ï¼‰" />
                        
                                <EditText
                                    android:id="@+id/et_pickup_code"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:hint="å–é¤ç ï¼ˆä¾‹å¦‚ï¼š12345ï¼‰"
                                    android:inputType="text" />
                        
                                <Button
                                    android:id="@+id/btn_pick_image"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="é€‰æ‹©æœ¬åœ°å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰"
                                    android:layout_marginTop="8dp"/>
                        
                                <ImageView
                                    android:id="@+id/iv_preview"
                                    android:layout_width="120dp"
                                    android:layout_height="120dp"
                                    android:layout_marginTop="8dp"
                                    android:scaleType="centerCrop"
                                    android:src="@android:drawable/ic_menu_gallery"/>
                        
                                <EditText
                                    android:id="@+id/et_custom_json"
                                    android:layout_width="match_parent"
                                    android:layout_height="120dp"
                                    android:hint="ï¼ˆå¯é€‰ï¼‰è‡ªå®šä¹‰ param_v2 JSONï¼Œä¼˜å…ˆä½¿ç”¨"
                                    android:inputType="textMultiLine"
                                    android:gravity="top"
                                    android:layout_marginTop="8dp"/>
                        
                                <Button
                                    android:id="@+id/btn_upload_and_send"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:text="ä¸Šä¼ å›¾ç‰‡å¹¶å‘é€ç„¦ç‚¹é€šçŸ¥ï¼ˆæˆ–ç›´æ¥å‘é€ï¼‰"
                                    android:layout_marginTop="12dp"/>
                        
                                <ProgressBar
                                    android:id="@+id/progress_bar"
                                    style="?android:attr/progressBarStyleLarge"
                                    android:layout_width="48dp"
                                    android:layout_height="48dp"
                                    android:visibility="gone"
                                    android:layout_gravity="center"
                                    android:layout_marginTop="12dp" />
                        
                            </LinearLayout>

                values
                    colors.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <resources>
                            <color name="purple_200">#FFBB86FC</color>
                            <color name="purple_500">#FF6200EE</color>
                            <color name="purple_700">#FF3700B3</color>
                            <color name="teal_200">#FF03DAC5</color>
                            <color name="teal_700">#FF018786</color>
                            <color name="black">#FF000000</color>
                            <color name="white">#FFFFFFFF</color>

                    strings.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <resources>
                            <string name="app_name">å–é¤ç è¯†åˆ«</string>

                    themes.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <resources>
                            <style name="Theme.HyperNotification" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
                                <item name="colorPrimary">@color/purple_500</item>
                                <item name="colorPrimaryVariant">@color/purple_700</item>
                                <item name="colorOnPrimary">@color/white</item>
                                <item name="colorSecondary">@color/teal_200</item>
                                <item name="colorSecondaryVariant">@color/teal_700</item>
                                <item name="colorOnSecondary">@color/black</item>
                                <item name="android:statusBarColor">@color/purple_700</item>
                            </style>
                        
                            <!-- NoActionBarä¸»é¢˜ï¼Œç”¨äºå¸¦æœ‰è‡ªå®šä¹‰Toolbarçš„Activity -->
                            <style name="Theme.HyperNotification.NoActionBar" parent="Theme.MaterialComponents.DayNight.NoActionBar">
                                <item name="colorPrimary">@color/purple_500</item>
                                <item name="colorPrimaryVariant">@color/purple_700</item>
                                <item name="colorOnPrimary">@color/white</item>
                                <item name="colorSecondary">@color/teal_200</item>
                                <item name="colorSecondaryVariant">@color/teal_700</item>
                                <item name="colorOnSecondary">@color/black</item>
                                <item name="android:statusBarColor">@color/purple_700</item>
                                <item name="windowActionBar">false</item>
                                <item name="windowNoTitle">true</item>
                            </style>

                xml
                    network_security_config.xml
                        <?xml version="1.0" encoding="utf-8"?>
                        <network-security-config>
                            <base-config cleartextTrafficPermitted="true">
                                <trust-anchors>
                                    <certificates src="system" />
                                    <certificates src="user" />
                                </trust-anchors>
                            </base-config>

build.gradle
    // Top-level build file where you can add configuration options common to all sub-projects/modules.
    buildscript {
        repositories {
            google()
            mavenCentral()
        }
        dependencies {
            classpath 'com.android.tools.build:gradle:8.1.0'
        }
    }
    
    allprojects {
        repositories {
            google()
            mavenCentral()
        }
    }
    
    task clean(type: Delete) {
        delete rootProject.buildDir

gradle
    wrapper
        gradle-wrapper.jar
        gradle-wrapper.properties
            distributionBase=GRADLE_USER_HOME
            distributionPath=wrapper/dists
            distributionUrl=https\://services.gradle.org/distributions/gradle-8.0-bin.zip
            networkTimeout=10000
            zipStoreBase=GRADLE_USER_HOME

gradle.properties
    # Project-wide Gradle settings.
    org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
    android.useAndroidX=true
    android.enableJetifier=true
    android.nonTransitiveRClass=true

gradlew
    #!/bin/sh
    
    ##############################################################################
    ##
    ##  Gradle start up script for UN*X
    ##
    ##############################################################################
    
    # Attempt to set APP_HOME
    # Resolve links: $0 may be a link
    PRG="$0"
    # Need this for relative symlinks.
    while [ -h "$PRG" ] ; do
        ls=`ls -ld "$PRG"`
        link=`expr "$ls" : '.*-> \(.*\)$'`
        if expr "$link" : '/.*' > /dev/null; then
            PRG="$link"
        else
            PRG=`dirname "$PRG"`"/$link"
        fi
    done
    SAVED="`pwd`"
    cd "`dirname \"$PRG\"`/" >/dev/null
    APP_HOME="`pwd -P`"
    cd "$SAVED" >/dev/null
    
    APP_NAME="Gradle"
    APP_BASE_NAME=`basename "$0"`
    
    # Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
    DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'
    
    # Use the maximum available, or set MAX_FD != -1 to use that value.
    MAX_FD="maximum"
    
    warn () {
        echo "$*"
    }
    
    die () {
        echo
        echo "$*"
        echo
        exit 1
    }
    
    # OS specific support (must be 'true' or 'false').
    cygwin=false
    msys=false
    darwin=false
    nonstop=false
    case "`uname`" in
      CYGWIN* )
        cygwin=true
        ;;
      Darwin* )
        darwin=true
        ;;
      MINGW* )
        msys=true
        ;;
      NONSTOP* )
        nonstop=true
        ;;
    esac
    
    CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar
    
    # Determine the Java command to use to start the JVM.
    if [ -n "$JAVA_HOME" ] ; then
        if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
            # IBM's JDK on AIX uses strange locations for the executables
            JAVACMD="$JAVA_HOME/jre/sh/java"
        else
            JAVACMD="$JAVA_HOME/bin/java"
        fi
        if [ ! -x "$JAVACMD" ] ; then
            die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME
    
    Please set the JAVA_HOME variable in your environment to match the
    location of your Java installation."
        fi
    else
        JAVACMD="java"
        which java >/dev/null 2>&1 || die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
    
    Please set the JAVA_HOME variable in your environment to match the
    location of your Java installation."
    fi
    
    # Increase the maximum file descriptors if we can.
    if [ "$cygwin" = "false" -a "$darwin" = "false" -a "$nonstop" = "false" ] ; then
        MAX_FD_LIMIT=`ulimit -H -n`
        if [ $? -eq 0 ] ; then
            if [ "$MAX_FD" = "maximum" -o "$MAX_FD" = "max" ] ; then
                MAX_FD="$MAX_FD_LIMIT"
            fi
            ulimit -n $MAX_FD
            if [ $? -ne 0 ] ; then
                warn "Could not set maximum file descriptor limit: $MAX_FD"
            fi
        else
            warn "Could not query maximum file descriptor limit: $MAX_FD_LIMIT"
        fi
    fi
    
    # For Darwin, add options to specify how the application appears in the dock
    if $darwin; then
        GRADLE_OPTS="$GRADLE_OPTS \"-Xdock:name=$APP_NAME\" \"-Xdock:icon=$APP_HOME/media/gradle.icns\""
    fi
    
    # For Cygwin or MSYS, switch paths to Windows format before running java
    if [ "$cygwin" = "true" -o "$msys" = "true" ] ; then
        APP_HOME=`cygpath --path --mixed "$APP_HOME"`
        CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`
        JAVACMD=`cygpath --unix "$JAVACMD"`
    
        # We build the pattern for arguments to be converted via cygpath
        ROOTDIRSRAW=`find -L / -maxdepth 1 -mindepth 1 -type d 2>/dev/null`
        SEP=""
        for dir in $ROOTDIRSRAW ; do
            ROOTDIRS="$ROOTDIRS$SEP$dir"
            SEP="|"
        done
        OURCYGPATTERN="(^($ROOTDIRS))"
        # Add a user-defined pattern to the cygpath arguments
        if [ "$GRADLE_CYGPATTERN" != "" ] ; then
            OURCYGPATTERN="$OURCYGPATTERN|($GRADLE_CYGPATTERN)"
        fi
        # Now convert the arguments - kludge to limit ourselves to /bin/sh
        i=0
        for arg in "$@" ; do
            CHECK=`echo "$arg"|egrep -c "$OURCYGPATTERN" -`
            CHECK2=`echo "$arg"|egrep -c "^-"`                                 ### Determine if an option
    
            if [ $CHECK -ne 0 ] && [ $CHECK2 -eq 0 ] ; then                    ### Added a condition
                eval `echo args$i`=`cygpath --path --ignore --mixed "$arg"`
            else
                eval `echo args$i`="\"$arg\""
            fi
            i=`expr $i + 1`
        done
        case $i in
            0) set -- ;;
            1) set -- "$args0" ;;
            2) set -- "$args0" "$args1" ;;
            3) set -- "$args0" "$args1" "$args2" ;;
            4) set -- "$args0" "$args1" "$args2" "$args3" ;;
            5) set -- "$args0" "$args1" "$args2" "$args3" "$args4" ;;
            6) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" ;;
            7) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" ;;
            8) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" ;;
            9) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" "$args8" ;;
        esac
    fi
    
    # Escape application args
    save () {
        for i do printf %s\n "$i" | sed "s/'/'\\''/g;1s/^/'/;\$s/\$/' \\/" ; done
        echo " "
    }
    APP_ARGS=`save "$@"`
    
    # Collect all arguments for the java command, following the shell quoting and substitution rules
    eval set -- $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS "\"-Dorg.gradle.appname=$APP_BASE_NAME\"" -classpath "\"$CLASSPATH\"" org.gradle.wrapper.GradleWrapperMain "$APP_ARGS"
    

gradlew.bat
    @rem
    @rem Copyright 2015 the original author or authors.
    @rem
    @rem Licensed under the Apache License, Version 2.0 (the "License");
    @rem you may not use this file except in compliance with the License.
    @rem You may obtain a copy of the License at
    @rem
    @rem      https://www.apache.org/licenses/LICENSE-2.0
    @rem
    @rem Unless required by applicable law or agreed to in writing, software
    @rem distributed under the License is distributed on an "AS IS" BASIS,
    @rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    @rem See the License for the specific language governing permissions and
    @rem limitations under the License.
    @rem
    
    @if "%DEBUG%"=="" @echo off
    @rem ##########################################################################
    @rem
    @rem  Gradle startup script for Windows
    @rem
    @rem ##########################################################################
    
    @rem Set local scope for the variables with windows NT shell
    if "%OS%"=="Windows_NT" setlocal
    
    set DIRNAME=%~dp0
    if "%DIRNAME%"=="" set DIRNAME=.
    set APP_BASE_NAME=%~n0
    set APP_HOME=%DIRNAME%
    
    @rem Resolve any "." and ".." in APP_HOME to make it shorter.
    for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi
    
    @rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
    set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"
    
    @rem Find java.exe
    if defined JAVA_HOME goto findJavaFromJavaHome
    
    set JAVA_EXE=java.exe
    %JAVA_EXE% -version >NUL 2>&1
    if %ERRORLEVEL% equ 0 goto execute
    
    echo.
    echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
    echo.
    echo Please set the JAVA_HOME variable in your environment to match the
    echo location of your Java installation.
    
    goto fail
    
    :findJavaFromJavaHome
    set JAVA_HOME=%JAVA_HOME:"=%
    set JAVA_EXE=%JAVA_HOME%/bin/java.exe
    
    if exist "%JAVA_EXE%" goto execute
    
    echo.
    echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
    echo.
    echo Please set the JAVA_HOME variable in your environment to match the
    echo location of your Java installation.
    
    goto fail
    
    :execute
    @rem Setup the command line
    
    set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar
    
    @rem Execute Gradle
    "%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*
    
    :end
    @rem End local scope for the variables with windows NT shell
    if %ERRORLEVEL% equ 0 goto mainEnd
    
    :fail
    rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
    rem the _cmd.exe /c_ return code!
    if not defined GRADLE_EXIT_CONSOLE exit /b %ERRORLEVEL%
    
    :mainEnd
    if "%OS%"=="Windows_NT" endlocal
    

no_hidden_indent_tree.txt
settings.gradle
    rootProject.name = 'HyperNotification'

---
